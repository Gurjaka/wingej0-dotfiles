Sourcing python-remove-tests-dir-hook
Sourcing python-catch-conflicts-hook.sh
Sourcing python-remove-bin-bytecode-hook.sh
Sourcing pypa-build-hook
Using pypaBuildPhase
Sourcing python-runtime-deps-check-hook
Using pythonRuntimeDepsCheckHook
Sourcing pypa-install-hook
Using pypaInstallPhase
Sourcing python-imports-check-hook.sh
Using pythonImportsCheckPhase
Sourcing python-namespaces-hook
Sourcing python-catch-conflicts-hook.sh
Sourcing pytest-check-hook
Using pytestCheckPhase
Running phase: unpackPhase
@nix { "action": "setPhase", "phase": "unpackPhase" }
unpacking source archive /nix/store/p9kvd2as5n6qwdgjwcki7pyjasavwsyp-source
source root is source
setting SOURCE_DATE_EPOCH to timestamp 315619200 of file source/whitelist.py
Running phase: patchPhase
@nix { "action": "setPhase", "phase": "patchPhase" }
Running phase: updateAutotoolsGnuConfigScriptsPhase
@nix { "action": "setPhase", "phase": "updateAutotoolsGnuConfigScriptsPhase" }
Running phase: configurePhase
@nix { "action": "setPhase", "phase": "configurePhase" }
no configure script, doing nothing
Running phase: buildPhase
@nix { "action": "setPhase", "phase": "buildPhase" }
Executing pypaBuildPhase
Setting SETUPTOOLS_SCM_PRETEND_VERSION to 0.28.1
Including all tracked files automatically
Creating a wheel...
[1m* Getting build dependencies for wheel...[0m
running egg_info
creating qtile_extras.egg-info
writing qtile_extras.egg-info/PKG-INFO
writing dependency_links to qtile_extras.egg-info/dependency_links.txt
writing top-level names to qtile_extras.egg-info/top_level.txt
writing manifest file 'qtile_extras.egg-info/SOURCES.txt'
reading manifest file 'qtile_extras.egg-info/SOURCES.txt'
reading manifest template 'MANIFEST.in'
warning: no previously-included files found matching 'coverage.xml'
warning: no previously-included files matching '__pycache__' found under directory '*'
warning: no previously-included files matching '*.py[co]' found under directory '*'
adding license file 'LICENSE'
writing manifest file 'qtile_extras.egg-info/SOURCES.txt'
[1m* Building wheel...[0m
running bdist_wheel
running build
running build_py
creating build
creating build/lib
creating build/lib/qtile_extras
copying qtile_extras/hook.py -> build/lib/qtile_extras
copying qtile_extras/bar.py -> build/lib/qtile_extras
copying qtile_extras/__init__.py -> build/lib/qtile_extras
copying qtile_extras/images.py -> build/lib/qtile_extras
creating build/lib/qtile_extras/popup
copying qtile_extras/popup/menu.py -> build/lib/qtile_extras/popup
copying qtile_extras/popup/toolkit.py -> build/lib/qtile_extras/popup
copying qtile_extras/popup/__init__.py -> build/lib/qtile_extras/popup
creating build/lib/qtile_extras/resources
copying qtile_extras/resources/__init__.py -> build/lib/qtile_extras/resources
creating build/lib/qtile_extras/layout
copying qtile_extras/layout/plasma.py -> build/lib/qtile_extras/layout
copying qtile_extras/layout/__init__.py -> build/lib/qtile_extras/layout
copying qtile_extras/layout/_mods.py -> build/lib/qtile_extras/layout
creating build/lib/qtile_extras/widget
copying qtile_extras/widget/scriptexit.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/decorations.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/upower.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/syncthing.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/continuous_poll.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/network.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/groupbox2.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/strava.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/animatedimage.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/currentlayout.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/analogueclock.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/livefootballscores.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/bluetooth.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/snapcast.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/pulse_volume.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/graph.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/mirror.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/image.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/tvheadend.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/githubnotifications.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/unitstatus.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/mpris2widget.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/iwd.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/pulse_extra.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/__init__.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/brightnesscontrol.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/base.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/statusnotifier.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/globalmenu.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/visualiser.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/systray.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/alsavolumecontrol.py -> build/lib/qtile_extras/widget
copying qtile_extras/widget/wordclock.py -> build/lib/qtile_extras/widget
creating build/lib/qtile_extras/popup/templates
copying qtile_extras/popup/templates/mpris2.py -> build/lib/qtile_extras/popup/templates
copying qtile_extras/popup/templates/volume.py -> build/lib/qtile_extras/popup/templates
copying qtile_extras/popup/templates/__init__.py -> build/lib/qtile_extras/popup/templates
creating build/lib/qtile_extras/resources/stravadata
copying qtile_extras/resources/stravadata/sync.py -> build/lib/qtile_extras/resources/stravadata
copying qtile_extras/resources/stravadata/locations.py -> build/lib/qtile_extras/resources/stravadata
copying qtile_extras/resources/stravadata/__init__.py -> build/lib/qtile_extras/resources/stravadata
creating build/lib/qtile_extras/resources/visualiser
copying qtile_extras/resources/visualiser/__init__.py -> build/lib/qtile_extras/resources/visualiser
copying qtile_extras/resources/visualiser/cava_draw.py -> build/lib/qtile_extras/resources/visualiser
creating build/lib/qtile_extras/resources/footballscores
copying qtile_extras/resources/footballscores/matchdict.py -> build/lib/qtile_extras/resources/footballscores
copying qtile_extras/resources/footballscores/exceptions.py -> build/lib/qtile_extras/resources/footballscores
copying qtile_extras/resources/footballscores/footballmatch.py -> build/lib/qtile_extras/resources/footballscores
copying qtile_extras/resources/footballscores/matchevent.py -> build/lib/qtile_extras/resources/footballscores
copying qtile_extras/resources/footballscores/utils.py -> build/lib/qtile_extras/resources/footballscores
copying qtile_extras/resources/footballscores/playeraction.py -> build/lib/qtile_extras/resources/footballscores
copying qtile_extras/resources/footballscores/morphlinks.py -> build/lib/qtile_extras/resources/footballscores
copying qtile_extras/resources/footballscores/__init__.py -> build/lib/qtile_extras/resources/footballscores
copying qtile_extras/resources/footballscores/league.py -> build/lib/qtile_extras/resources/footballscores
copying qtile_extras/resources/footballscores/fixtures.py -> build/lib/qtile_extras/resources/footballscores
creating build/lib/qtile_extras/resources/wordclock
copying qtile_extras/resources/wordclock/portuguese.py -> build/lib/qtile_extras/resources/wordclock
copying qtile_extras/resources/wordclock/swedish.py -> build/lib/qtile_extras/resources/wordclock
copying qtile_extras/resources/wordclock/english.py -> build/lib/qtile_extras/resources/wordclock
copying qtile_extras/resources/wordclock/dutch.py -> build/lib/qtile_extras/resources/wordclock
copying qtile_extras/resources/wordclock/finnish.py -> build/lib/qtile_extras/resources/wordclock
copying qtile_extras/resources/wordclock/__init__.py -> build/lib/qtile_extras/resources/wordclock
copying qtile_extras/resources/wordclock/french.py -> build/lib/qtile_extras/resources/wordclock
copying qtile_extras/resources/wordclock/spanish.py -> build/lib/qtile_extras/resources/wordclock
creating build/lib/qtile_extras/resources/wallpapers
copying qtile_extras/resources/wallpapers/__init__.py -> build/lib/qtile_extras/resources/wallpapers
creating build/lib/qtile_extras/resources/dbusmenu
copying qtile_extras/resources/dbusmenu/__init__.py -> build/lib/qtile_extras/resources/dbusmenu
copying qtile_extras/resources/dbusmenu/dbusmenu.py -> build/lib/qtile_extras/resources/dbusmenu
creating build/lib/qtile_extras/resources/global_menu
copying qtile_extras/resources/global_menu/registrar.py -> build/lib/qtile_extras/resources/global_menu
copying qtile_extras/resources/global_menu/__init__.py -> build/lib/qtile_extras/resources/global_menu
creating build/lib/qtile_extras/layout/decorations
copying qtile_extras/layout/decorations/injections.py -> build/lib/qtile_extras/layout/decorations
copying qtile_extras/layout/decorations/borders.py -> build/lib/qtile_extras/layout/decorations
copying qtile_extras/layout/decorations/injections_wayland.py -> build/lib/qtile_extras/layout/decorations
copying qtile_extras/layout/decorations/__init__.py -> build/lib/qtile_extras/layout/decorations
creating build/lib/qtile_extras/widget/mixins
copying qtile_extras/widget/mixins/__init__.py -> build/lib/qtile_extras/widget/mixins
running egg_info
writing qtile_extras.egg-info/PKG-INFO
writing dependency_links to qtile_extras.egg-info/dependency_links.txt
writing top-level names to qtile_extras.egg-info/top_level.txt
reading manifest file 'qtile_extras.egg-info/SOURCES.txt'
reading manifest template 'MANIFEST.in'
warning: no previously-included files found matching 'coverage.xml'
warning: no previously-included files matching '__pycache__' found under directory '*'
warning: no previously-included files matching '*.py[co]' found under directory '*'
adding license file 'LICENSE'
writing manifest file 'qtile_extras.egg-info/SOURCES.txt'
copying qtile_extras/py.typed -> build/lib/qtile_extras
creating build/lib/qtile_extras/resources/syncthing
copying qtile_extras/resources/syncthing/syncthing.svg -> build/lib/qtile_extras/resources/syncthing
creating build/lib/qtile_extras/resources/github-icons
copying qtile_extras/resources/github-icons/github.svg -> build/lib/qtile_extras/resources/github-icons
creating build/lib/qtile_extras/resources/tvheadend-icons
copying qtile_extras/resources/tvheadend-icons/icon.svg -> build/lib/qtile_extras/resources/tvheadend-icons
creating build/lib/qtile_extras/resources/media-icons
copying qtile_extras/resources/media-icons/default.png -> build/lib/qtile_extras/resources/media-icons
copying qtile_extras/resources/media-icons/default.svg -> build/lib/qtile_extras/resources/media-icons
copying qtile_extras/resources/media-icons/next.svg -> build/lib/qtile_extras/resources/media-icons
copying qtile_extras/resources/media-icons/play_pause.svg -> build/lib/qtile_extras/resources/media-icons
copying qtile_extras/resources/media-icons/previous.svg -> build/lib/qtile_extras/resources/media-icons
copying qtile_extras/resources/media-icons/stop.svg -> build/lib/qtile_extras/resources/media-icons
copying qtile_extras/resources/wallpapers/qte_tiles.png -> build/lib/qtile_extras/resources/wallpapers
copying qtile_extras/resources/wallpapers/qte_triangles.png -> build/lib/qtile_extras/resources/wallpapers
copying qtile_extras/resources/wallpapers/qte_triangles_rounded.png -> build/lib/qtile_extras/resources/wallpapers
creating build/lib/qtile_extras/resources/snapcast-icons
copying qtile_extras/resources/snapcast-icons/snapcast.svg -> build/lib/qtile_extras/resources/snapcast-icons
installing to build/bdist.linux-x86_64/wheel
running install
running install_lib
creating build/bdist.linux-x86_64
creating build/bdist.linux-x86_64/wheel
creating build/bdist.linux-x86_64/wheel/qtile_extras
creating build/bdist.linux-x86_64/wheel/qtile_extras/popup
copying build/lib/qtile_extras/popup/menu.py -> build/bdist.linux-x86_64/wheel/qtile_extras/popup
copying build/lib/qtile_extras/popup/toolkit.py -> build/bdist.linux-x86_64/wheel/qtile_extras/popup
creating build/bdist.linux-x86_64/wheel/qtile_extras/popup/templates
copying build/lib/qtile_extras/popup/templates/mpris2.py -> build/bdist.linux-x86_64/wheel/qtile_extras/popup/templates
copying build/lib/qtile_extras/popup/templates/volume.py -> build/bdist.linux-x86_64/wheel/qtile_extras/popup/templates
copying build/lib/qtile_extras/popup/templates/__init__.py -> build/bdist.linux-x86_64/wheel/qtile_extras/popup/templates
copying build/lib/qtile_extras/popup/__init__.py -> build/bdist.linux-x86_64/wheel/qtile_extras/popup
copying build/lib/qtile_extras/hook.py -> build/bdist.linux-x86_64/wheel/qtile_extras
copying build/lib/qtile_extras/bar.py -> build/bdist.linux-x86_64/wheel/qtile_extras
creating build/bdist.linux-x86_64/wheel/qtile_extras/resources
creating build/bdist.linux-x86_64/wheel/qtile_extras/resources/syncthing
copying build/lib/qtile_extras/resources/syncthing/syncthing.svg -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/syncthing
creating build/bdist.linux-x86_64/wheel/qtile_extras/resources/stravadata
copying build/lib/qtile_extras/resources/stravadata/sync.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/stravadata
copying build/lib/qtile_extras/resources/stravadata/locations.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/stravadata
copying build/lib/qtile_extras/resources/stravadata/__init__.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/stravadata
creating build/bdist.linux-x86_64/wheel/qtile_extras/resources/visualiser
copying build/lib/qtile_extras/resources/visualiser/__init__.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/visualiser
copying build/lib/qtile_extras/resources/visualiser/cava_draw.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/visualiser
creating build/bdist.linux-x86_64/wheel/qtile_extras/resources/github-icons
copying build/lib/qtile_extras/resources/github-icons/github.svg -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/github-icons
creating build/bdist.linux-x86_64/wheel/qtile_extras/resources/footballscores
copying build/lib/qtile_extras/resources/footballscores/matchdict.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/footballscores
copying build/lib/qtile_extras/resources/footballscores/exceptions.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/footballscores
copying build/lib/qtile_extras/resources/footballscores/footballmatch.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/footballscores
copying build/lib/qtile_extras/resources/footballscores/matchevent.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/footballscores
copying build/lib/qtile_extras/resources/footballscores/utils.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/footballscores
copying build/lib/qtile_extras/resources/footballscores/playeraction.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/footballscores
copying build/lib/qtile_extras/resources/footballscores/morphlinks.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/footballscores
copying build/lib/qtile_extras/resources/footballscores/__init__.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/footballscores
copying build/lib/qtile_extras/resources/footballscores/league.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/footballscores
copying build/lib/qtile_extras/resources/footballscores/fixtures.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/footballscores
creating build/bdist.linux-x86_64/wheel/qtile_extras/resources/wordclock
copying build/lib/qtile_extras/resources/wordclock/portuguese.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/wordclock
copying build/lib/qtile_extras/resources/wordclock/swedish.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/wordclock
copying build/lib/qtile_extras/resources/wordclock/english.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/wordclock
copying build/lib/qtile_extras/resources/wordclock/dutch.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/wordclock
copying build/lib/qtile_extras/resources/wordclock/finnish.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/wordclock
copying build/lib/qtile_extras/resources/wordclock/__init__.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/wordclock
copying build/lib/qtile_extras/resources/wordclock/french.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/wordclock
copying build/lib/qtile_extras/resources/wordclock/spanish.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/wordclock
creating build/bdist.linux-x86_64/wheel/qtile_extras/resources/tvheadend-icons
copying build/lib/qtile_extras/resources/tvheadend-icons/icon.svg -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/tvheadend-icons
creating build/bdist.linux-x86_64/wheel/qtile_extras/resources/media-icons
copying build/lib/qtile_extras/resources/media-icons/stop.svg -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/media-icons
copying build/lib/qtile_extras/resources/media-icons/play_pause.svg -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/media-icons
copying build/lib/qtile_extras/resources/media-icons/previous.svg -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/media-icons
copying build/lib/qtile_extras/resources/media-icons/default.svg -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/media-icons
copying build/lib/qtile_extras/resources/media-icons/next.svg -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/media-icons
copying build/lib/qtile_extras/resources/media-icons/default.png -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/media-icons
creating build/bdist.linux-x86_64/wheel/qtile_extras/resources/wallpapers
copying build/lib/qtile_extras/resources/wallpapers/qte_triangles.png -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/wallpapers
copying build/lib/qtile_extras/resources/wallpapers/qte_triangles_rounded.png -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/wallpapers
copying build/lib/qtile_extras/resources/wallpapers/__init__.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/wallpapers
copying build/lib/qtile_extras/resources/wallpapers/qte_tiles.png -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/wallpapers
creating build/bdist.linux-x86_64/wheel/qtile_extras/resources/snapcast-icons
copying build/lib/qtile_extras/resources/snapcast-icons/snapcast.svg -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/snapcast-icons
creating build/bdist.linux-x86_64/wheel/qtile_extras/resources/dbusmenu
copying build/lib/qtile_extras/resources/dbusmenu/__init__.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/dbusmenu
copying build/lib/qtile_extras/resources/dbusmenu/dbusmenu.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/dbusmenu
creating build/bdist.linux-x86_64/wheel/qtile_extras/resources/global_menu
copying build/lib/qtile_extras/resources/global_menu/registrar.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/global_menu
copying build/lib/qtile_extras/resources/global_menu/__init__.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources/global_menu
copying build/lib/qtile_extras/resources/__init__.py -> build/bdist.linux-x86_64/wheel/qtile_extras/resources
creating build/bdist.linux-x86_64/wheel/qtile_extras/layout
copying build/lib/qtile_extras/layout/plasma.py -> build/bdist.linux-x86_64/wheel/qtile_extras/layout
copying build/lib/qtile_extras/layout/__init__.py -> build/bdist.linux-x86_64/wheel/qtile_extras/layout
copying build/lib/qtile_extras/layout/_mods.py -> build/bdist.linux-x86_64/wheel/qtile_extras/layout
creating build/bdist.linux-x86_64/wheel/qtile_extras/layout/decorations
copying build/lib/qtile_extras/layout/decorations/injections.py -> build/bdist.linux-x86_64/wheel/qtile_extras/layout/decorations
copying build/lib/qtile_extras/layout/decorations/borders.py -> build/bdist.linux-x86_64/wheel/qtile_extras/layout/decorations
copying build/lib/qtile_extras/layout/decorations/injections_wayland.py -> build/bdist.linux-x86_64/wheel/qtile_extras/layout/decorations
copying build/lib/qtile_extras/layout/decorations/__init__.py -> build/bdist.linux-x86_64/wheel/qtile_extras/layout/decorations
copying build/lib/qtile_extras/py.typed -> build/bdist.linux-x86_64/wheel/qtile_extras
copying build/lib/qtile_extras/__init__.py -> build/bdist.linux-x86_64/wheel/qtile_extras
creating build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/scriptexit.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/decorations.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
creating build/bdist.linux-x86_64/wheel/qtile_extras/widget/mixins
copying build/lib/qtile_extras/widget/mixins/__init__.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget/mixins
copying build/lib/qtile_extras/widget/upower.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/syncthing.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/continuous_poll.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/network.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/groupbox2.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/strava.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/animatedimage.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/currentlayout.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/analogueclock.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/livefootballscores.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/bluetooth.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/snapcast.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/pulse_volume.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/graph.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/mirror.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/image.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/tvheadend.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/githubnotifications.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/unitstatus.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/mpris2widget.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/iwd.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/pulse_extra.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/__init__.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/brightnesscontrol.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/base.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/statusnotifier.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/globalmenu.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/visualiser.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/systray.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/alsavolumecontrol.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/widget/wordclock.py -> build/bdist.linux-x86_64/wheel/qtile_extras/widget
copying build/lib/qtile_extras/images.py -> build/bdist.linux-x86_64/wheel/qtile_extras
running install_egg_info
Copying qtile_extras.egg-info to build/bdist.linux-x86_64/wheel/qtile_extras-0.28.1-py3.12.egg-info
running install_scripts
creating build/bdist.linux-x86_64/wheel/qtile_extras-0.28.1.dist-info/WHEEL
creating '/build/source/dist/.tmp-xi5x1zed/qtile_extras-0.28.1-py3-none-any.whl' and adding 'build/bdist.linux-x86_64/wheel' to it
adding 'qtile_extras/__init__.py'
adding 'qtile_extras/bar.py'
adding 'qtile_extras/hook.py'
adding 'qtile_extras/images.py'
adding 'qtile_extras/py.typed'
adding 'qtile_extras/layout/__init__.py'
adding 'qtile_extras/layout/_mods.py'
adding 'qtile_extras/layout/plasma.py'
adding 'qtile_extras/layout/decorations/__init__.py'
adding 'qtile_extras/layout/decorations/borders.py'
adding 'qtile_extras/layout/decorations/injections.py'
adding 'qtile_extras/layout/decorations/injections_wayland.py'
adding 'qtile_extras/popup/__init__.py'
adding 'qtile_extras/popup/menu.py'
adding 'qtile_extras/popup/toolkit.py'
adding 'qtile_extras/popup/templates/__init__.py'
adding 'qtile_extras/popup/templates/mpris2.py'
adding 'qtile_extras/popup/templates/volume.py'
adding 'qtile_extras/resources/__init__.py'
adding 'qtile_extras/resources/dbusmenu/__init__.py'
adding 'qtile_extras/resources/dbusmenu/dbusmenu.py'
adding 'qtile_extras/resources/footballscores/__init__.py'
adding 'qtile_extras/resources/footballscores/exceptions.py'
adding 'qtile_extras/resources/footballscores/fixtures.py'
adding 'qtile_extras/resources/footballscores/footballmatch.py'
adding 'qtile_extras/resources/footballscores/league.py'
adding 'qtile_extras/resources/footballscores/matchdict.py'
adding 'qtile_extras/resources/footballscores/matchevent.py'
adding 'qtile_extras/resources/footballscores/morphlinks.py'
adding 'qtile_extras/resources/footballscores/playeraction.py'
adding 'qtile_extras/resources/footballscores/utils.py'
adding 'qtile_extras/resources/github-icons/github.svg'
adding 'qtile_extras/resources/global_menu/__init__.py'
adding 'qtile_extras/resources/global_menu/registrar.py'
adding 'qtile_extras/resources/media-icons/default.png'
adding 'qtile_extras/resources/media-icons/default.svg'
adding 'qtile_extras/resources/media-icons/next.svg'
adding 'qtile_extras/resources/media-icons/play_pause.svg'
adding 'qtile_extras/resources/media-icons/previous.svg'
adding 'qtile_extras/resources/media-icons/stop.svg'
adding 'qtile_extras/resources/snapcast-icons/snapcast.svg'
adding 'qtile_extras/resources/stravadata/__init__.py'
adding 'qtile_extras/resources/stravadata/locations.py'
adding 'qtile_extras/resources/stravadata/sync.py'
adding 'qtile_extras/resources/syncthing/syncthing.svg'
adding 'qtile_extras/resources/tvheadend-icons/icon.svg'
adding 'qtile_extras/resources/visualiser/__init__.py'
adding 'qtile_extras/resources/visualiser/cava_draw.py'
adding 'qtile_extras/resources/wallpapers/__init__.py'
adding 'qtile_extras/resources/wallpapers/qte_tiles.png'
adding 'qtile_extras/resources/wallpapers/qte_triangles.png'
adding 'qtile_extras/resources/wallpapers/qte_triangles_rounded.png'
adding 'qtile_extras/resources/wordclock/__init__.py'
adding 'qtile_extras/resources/wordclock/dutch.py'
adding 'qtile_extras/resources/wordclock/english.py'
adding 'qtile_extras/resources/wordclock/finnish.py'
adding 'qtile_extras/resources/wordclock/french.py'
adding 'qtile_extras/resources/wordclock/portuguese.py'
adding 'qtile_extras/resources/wordclock/spanish.py'
adding 'qtile_extras/resources/wordclock/swedish.py'
adding 'qtile_extras/widget/__init__.py'
adding 'qtile_extras/widget/alsavolumecontrol.py'
adding 'qtile_extras/widget/analogueclock.py'
adding 'qtile_extras/widget/animatedimage.py'
adding 'qtile_extras/widget/base.py'
adding 'qtile_extras/widget/bluetooth.py'
adding 'qtile_extras/widget/brightnesscontrol.py'
adding 'qtile_extras/widget/continuous_poll.py'
adding 'qtile_extras/widget/currentlayout.py'
adding 'qtile_extras/widget/decorations.py'
adding 'qtile_extras/widget/githubnotifications.py'
adding 'qtile_extras/widget/globalmenu.py'
adding 'qtile_extras/widget/graph.py'
adding 'qtile_extras/widget/groupbox2.py'
adding 'qtile_extras/widget/image.py'
adding 'qtile_extras/widget/iwd.py'
adding 'qtile_extras/widget/livefootballscores.py'
adding 'qtile_extras/widget/mirror.py'
adding 'qtile_extras/widget/mpris2widget.py'
adding 'qtile_extras/widget/network.py'
adding 'qtile_extras/widget/pulse_extra.py'
adding 'qtile_extras/widget/pulse_volume.py'
adding 'qtile_extras/widget/scriptexit.py'
adding 'qtile_extras/widget/snapcast.py'
adding 'qtile_extras/widget/statusnotifier.py'
adding 'qtile_extras/widget/strava.py'
adding 'qtile_extras/widget/syncthing.py'
adding 'qtile_extras/widget/systray.py'
adding 'qtile_extras/widget/tvheadend.py'
adding 'qtile_extras/widget/unitstatus.py'
adding 'qtile_extras/widget/upower.py'
adding 'qtile_extras/widget/visualiser.py'
adding 'qtile_extras/widget/wordclock.py'
adding 'qtile_extras/widget/mixins/__init__.py'
adding 'qtile_extras-0.28.1.dist-info/LICENSE'
adding 'qtile_extras-0.28.1.dist-info/METADATA'
adding 'qtile_extras-0.28.1.dist-info/WHEEL'
adding 'qtile_extras-0.28.1.dist-info/top_level.txt'
adding 'qtile_extras-0.28.1.dist-info/RECORD'
removing build/bdist.linux-x86_64/wheel
[1m[92mSuccessfully built [4mqtile_extras-0.28.1-py3-none-any.whl[0m[1m[92m[0m
Finished creating a wheel...
Finished executing pypaBuildPhase
Running phase: pythonRuntimeDepsCheckHook
@nix { "action": "setPhase", "phase": "pythonRuntimeDepsCheckHook" }
Executing pythonRuntimeDepsCheck
Checking runtime dependencies for qtile_extras-0.28.1-py3-none-any.whl
Finished executing pythonRuntimeDepsCheck
Running phase: glibPreInstallPhase
@nix { "action": "setPhase", "phase": "glibPreInstallPhase" }
Running phase: glibPreInstallPhase
@nix { "action": "setPhase", "phase": "glibPreInstallPhase" }
Running phase: glibPreInstallPhase
@nix { "action": "setPhase", "phase": "glibPreInstallPhase" }
Running phase: installPhase
@nix { "action": "setPhase", "phase": "installPhase" }
Executing pypaInstallPhase
Successfully installed qtile_extras-0.28.1-py3-none-any.whl
Finished executing pypaInstallPhase
Running phase: pythonOutputDistPhase
@nix { "action": "setPhase", "phase": "pythonOutputDistPhase" }
Executing pythonOutputDistPhase
Finished executing pythonOutputDistPhase
Running phase: giDiscoverSelf
@nix { "action": "setPhase", "phase": "giDiscoverSelf" }
Running phase: glibPreFixupPhase
@nix { "action": "setPhase", "phase": "glibPreFixupPhase" }
Running phase: giDiscoverSelf
@nix { "action": "setPhase", "phase": "giDiscoverSelf" }
Running phase: glibPreFixupPhase
@nix { "action": "setPhase", "phase": "glibPreFixupPhase" }
Running phase: dropIconThemeCache
@nix { "action": "setPhase", "phase": "dropIconThemeCache" }
Running phase: glibPreFixupPhase
@nix { "action": "setPhase", "phase": "glibPreFixupPhase" }
Running phase: fixupPhase
@nix { "action": "setPhase", "phase": "fixupPhase" }
shrinking RPATHs of ELF executables and libraries in /nix/store/qi0sbmc1aax6lp3im56ax8da8jf2psam-python3.12-qtile-extras-0.28.1
checking for references to /build/ in /nix/store/qi0sbmc1aax6lp3im56ax8da8jf2psam-python3.12-qtile-extras-0.28.1...
patching script interpreter paths in /nix/store/qi0sbmc1aax6lp3im56ax8da8jf2psam-python3.12-qtile-extras-0.28.1
stripping (with command strip and flags -S -p) in  /nix/store/qi0sbmc1aax6lp3im56ax8da8jf2psam-python3.12-qtile-extras-0.28.1/lib
shrinking RPATHs of ELF executables and libraries in /nix/store/8l885gf30pvxn0y32plfa65w72bys01i-python3.12-qtile-extras-0.28.1-dist
checking for references to /build/ in /nix/store/8l885gf30pvxn0y32plfa65w72bys01i-python3.12-qtile-extras-0.28.1-dist...
patching script interpreter paths in /nix/store/8l885gf30pvxn0y32plfa65w72bys01i-python3.12-qtile-extras-0.28.1-dist
Executing pythonRemoveTestsDir
Finished executing pythonRemoveTestsDir
Running phase: installCheckPhase
@nix { "action": "setPhase", "phase": "installCheckPhase" }
no Makefile or custom installCheckPhase, doing nothing
Running phase: pythonCatchConflictsPhase
@nix { "action": "setPhase", "phase": "pythonCatchConflictsPhase" }
Running phase: pythonRemoveBinBytecodePhase
@nix { "action": "setPhase", "phase": "pythonRemoveBinBytecodePhase" }
Running phase: pythonImportsCheckPhase
@nix { "action": "setPhase", "phase": "pythonImportsCheckPhase" }
Executing pythonImportsCheckPhase
Check whether the following modules can be imported: qtile_extras
Running phase: pytestCheckPhase
@nix { "action": "setPhase", "phase": "pytestCheckPhase" }
Executing pytestCheckPhase
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.12.6, pytest-8.3.2, pluggy-1.5.0 -- /nix/store/wfbjq35kxs6x83c3ncpfxdyl5gbhdx4h-python3-3.12.6/bin/python3.12
cachedir: .pytest_cache
rootdir: /build/source
configfile: setup.cfg
testpaths: test
plugins: asyncio-0.23.8, lazy-fixture-0.6.3
asyncio: mode=Mode.STRICT
[1mcollecting ... [0m[1mcollecting 180 items                                                           [0m[1mcollected 377 items / 62 deselected / 315 selected                             [0m

test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager0] [32mPASSED[0m[33m [  0%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager1] [32mPASSED[0m[33m [  0%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager2] [32mPASSED[0m[33m [  0%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager3] [32mPASSED[0m[33m [  1%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager4] [32mPASSED[0m[33m [  1%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager5] [32mPASSED[0m[33m [  1%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager6] [32mPASSED[0m[33m [  2%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager7] [32mPASSED[0m[33m [  2%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager8] [32mPASSED[0m[33m [  2%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager9] [32mPASSED[0m[33m [  3%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager10] [32mPASSED[0m[33m [  3%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager11] [32mPASSED[0m[33m [  3%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager12] [32mPASSED[0m[33m [  4%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager13] [32mPASSED[0m[33m [  4%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager14] [32mPASSED[0m[33m [  4%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager15] [32mPASSED[0m[33m [  5%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager16] [32mPASSED[0m[33m [  5%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager17] [32mPASSED[0m[33m [  5%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager18] [32mPASSED[0m[33m [  6%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager19] [32mPASSED[0m[33m [  6%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager20] [32mPASSED[0m[33m [  6%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager21] [32mPASSED[0m[33m [  6%][0m
test/layout/decorations/test_border_decorations.py::test_window_decoration[1-x11-manager22] [32mPASSED[0m[33m [  7%][0m
test/popup/test_menu.py::test_popup_menu_from_dbus[1-x11] [32mPASSED[0m[33m         [  7%][0m
test/popup/test_toolkit.py::test_menu_navigation[1-x11-ToolkitConfig] [32mPASSED[0m[33m [  7%][0m
test/popup/test_toolkit.py::test_absolute_layout[1-x11] [32mPASSED[0m[33m           [  8%][0m
test/popup/test_toolkit.py::test_relative_layout[1-x11] [32mPASSED[0m[33m           [  8%][0m
test/popup/test_toolkit.py::test_grid_layout[1-x11] [32mPASSED[0m[33m               [  8%][0m
test/popup/test_toolkit.py::test_multiple_screens[1-x11-TwoScreensConfig] [32mPASSED[0m[33m [  9%][0m
test/popup/test_toolkit.py::test_popup_widgets[1-x11] [32mPASSED[0m[33m             [  9%][0m
test/popup/test_toolkit.py::test_popup_widgets_vertical[1-x11] [32mPASSED[0m[33m    [  9%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts0-expected0] [32mPASSED[0m[33m [ 10%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts1-expected1] [32mPASSED[0m[33m [ 10%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts2-expected2] [32mPASSED[0m[33m [ 10%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts3-expected3] [32mPASSED[0m[33m [ 11%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts4-expected4] [32mPASSED[0m[33m [ 11%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts5-expected5] [32mPASSED[0m[33m [ 11%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts6-expected6] [32mPASSED[0m[33m [ 12%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts7-expected7] [32mPASSED[0m[33m [ 12%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts8-expected8] [32mPASSED[0m[33m [ 12%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts9-expected9] [32mPASSED[0m[33m [ 13%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts10-expected10] [32mPASSED[0m[33m [ 13%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts11-expected11] [32mPASSED[0m[33m [ 13%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts12-expected12] [32mPASSED[0m[33m [ 13%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts13-expected13] [32mPASSED[0m[33m [ 14%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts14-expected14] [32mPASSED[0m[33m [ 14%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts15-expected15] [32mPASSED[0m[33m [ 14%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts16-expected16] [32mPASSED[0m[33m [ 15%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts17-expected17] [32mPASSED[0m[33m [ 15%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts18-expected18] [32mPASSED[0m[33m [ 15%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts19-expected19] [32mPASSED[0m[33m [ 16%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts20-expected20] [32mPASSED[0m[33m [ 16%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-right-opts21-expected21] [32mPASSED[0m[33m [ 16%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-right-opts22-expected22] [32mPASSED[0m[33m [ 17%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-right-opts23-expected23] [32mPASSED[0m[33m [ 17%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-bottom-opts24-expected24] [32mPASSED[0m[33m [ 17%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-bottom-opts25-expected25] [32mPASSED[0m[33m [ 18%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-bottom-opts26-expected26] [32mPASSED[0m[33m [ 18%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-left-opts27-expected27] [32mPASSED[0m[33m [ 18%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-left-opts28-expected28] [32mPASSED[0m[33m [ 19%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-left-opts29-expected29] [32mPASSED[0m[33m [ 19%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts30-expected30] [32mPASSED[0m[33m [ 19%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts31-expected31] [32mPASSED[0m[33m [ 20%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts32-expected32] [32mPASSED[0m[33m [ 20%][0m
test/popup/test_toolkit.py::test_popup_positioning_relative[1-x11-top-opts33-expected33] [32mPASSED[0m[33m [ 20%][0m
test/popup/test_toolkit.py::test_popup_positioning_centered[1-x11] [32mPASSED[0m[33m [ 20%][0m
test/popup/test_toolkit.py::test_popup_update_controls[1-x11] [32mPASSED[0m[33m     [ 21%][0m
test/popup/test_toolkit.py::test_bind_callbacks_and_overlap[1-x11] [32mPASSED[0m[33m [ 21%][0m
test/test_images.py::test_draw[1-x11] [31mFAILED[0m[31m                             [ 21%][0m
test/widget/decorations/test_widget_decorations.py::test_decorations[1-x11] [32mPASSED[0m[31m [ 22%][0m
test/widget/decorations/test_widget_decorations.py::test_rect_decoration_using_widget_background[1-x11] [32mPASSED[0m[31m [ 22%][0m
test/widget/decorations/test_widget_decorations.py::test_powerline_decoration[1-x11] [32mPASSED[0m[31m [ 22%][0m
test/widget/decorations/test_widget_decorations.py::test_decoration_extrawidth[1-x11] [32mPASSED[0m[31m [ 23%][0m
test/widget/decorations/test_widget_decorations.py::test_decoration_grouping[1-x11-BorderDecoration-dec_config0] [32mPASSED[0m[31m [ 23%][0m
test/widget/decorations/test_widget_decorations.py::test_decoration_grouping[1-x11-RectDecoration-dec_config1] [32mPASSED[0m[31m [ 23%][0m
test/widget/test_alsawidget.py::test_alsawidget_defaults[1-x11] [32mPASSED[0m[31m   [ 24%][0m
test/widget/test_alsawidget.py::test_controls[1-x11] [32mPASSED[0m[31m              [ 24%][0m
test/widget/test_alsawidget.py::test_step[1-x11-alsa_manager0] [32mPASSED[0m[31m    [ 24%][0m
test/widget/test_alsawidget.py::test_icons[1-x11-alsa_manager0] [32mPASSED[0m[31m   [ 25%][0m
test/widget/test_alsawidget.py::test_no_icons[1-x11-alsa_manager0] [32mPASSED[0m[31m [ 25%][0m
test/widget/test_analogueclock.py::test_analogueclock_unknown_face[1-x11-ClockConfig] [32mPASSED[0m[31m [ 25%][0m
test/widget/test_analogueclock.py::test_analogueclock_loop[1-x11-ClockConfig] [32mPASSED[0m[31m [ 26%][0m
test/widget/test_animated_image.py::test_default[1-x11] [31mERROR[0m[31m            [ 26%][0m
test/widget/test_animated_image.py::test_multiple_loops[1-x11-widget0] [31mERROR[0m[31m [ 26%][0m
test/widget/test_animated_image.py::test_stop[1-x11-widget0] [31mERROR[0m[31m       [ 26%][0m
test/widget/test_animated_image.py::test_width_default[1-x11] [31mERROR[0m[31m      [ 27%][0m
test/widget/test_animated_image.py::test_width_no_padding[1-x11-widget0] [31mERROR[0m[31m [ 27%][0m
test/widget/test_brightness_control.py::test_brightness_defaults[1-x11] [32mPASSED[0m[31m [ 27%][0m
test/widget/test_brightness_control.py::test_brightness_limits[1-x11-bright_manager0] [32mPASSED[0m[31m [ 28%][0m
test/widget/test_brightness_control.py::test_brightness_restrict_max_brightness[1-x11-bright_manager0] [32mPASSED[0m[31m [ 28%][0m
test/widget/test_brightness_control.py::test_brightness_restrict_no_max_brightness_path[1-x11-bright_manager0] [32mPASSED[0m[31m [ 28%][0m
test/widget/test_brightness_control.py::test_brightness_restrict_no_max_brightness_default[1-x11-bright_manager0] [32mPASSED[0m[31m [ 29%][0m
test/widget/test_brightness_control.py::test_brightness_hide_bar[1-x11-bright_manager0] [32mPASSED[0m[31m [ 29%][0m
test/widget/test_continuous_poll.py::test_continuous_poll[1-x11-CPollConfig] [32mPASSED[0m[31m [ 29%][0m
test/widget/test_currentlayouticon.py::test_currentlayouticon_icon_size[1-x11-currentlayout_manager0-55] [32mPASSED[0m[31m [ 30%][0m
test/widget/test_currentlayouticon.py::test_currentlayouticon_icon_size[1-x11-currentlayout_manager1-54] [32mPASSED[0m[31m [ 30%][0m
test/widget/test_currentlayouticon.py::test_currentlayouticon_icon_size[1-x11-currentlayout_manager2-30] [32mPASSED[0m[31m [ 30%][0m
test/widget/test_currentlayouticon.py::test_currentlayouticon_missing_icon[1-x11-layout_list0] [32mPASSED[0m[31m [ 31%][0m
test/widget/test_currentlayouticon.py::test_currentlayouticon_bad_icon[1-x11-temp_icons] [32mPASSED[0m[31m [ 31%][0m
test/widget/test_githubnotifications.py::test_githubnotifications_colours[1-x11-False-808080] [31mFAILED[0m[31m [ 31%][0m
test/widget/test_githubnotifications.py::test_githubnotifications_colours[1-x11-True-ffffff] [31mFAILED[0m[31m [ 32%][0m
test/widget/test_githubnotifications.py::test_githubnotifications_colours[1-x11-error-ffff00] [31mFAILED[0m[31m [ 32%][0m
test/widget/test_githubnotifications.py::test_githubnotifications_logging[1-x11-False-githubnotification_manager0-expected0] [31mFAILED[0m[31m [ 32%][0m
test/widget/test_githubnotifications.py::test_githubnotifications_logging[1-x11-error-githubnotification_manager1-expected1] [31mFAILED[0m[31m [ 33%][0m
test/widget/test_githubnotifications.py::test_githubnotifications_icon[1-x11-False-githubnotification_manager0-49] [31mFAILED[0m[31m [ 33%][0m
test/widget/test_githubnotifications.py::test_githubnotifications_icon[1-x11-False-githubnotification_manager1-16] [31mFAILED[0m[31m [ 33%][0m
test/widget/test_groupbox2.py::test_default[1-x11] [32mPASSED[0m[31m                [ 33%][0m
test/widget/test_groupbox2.py::test_function[1-x11-gbmanager0] [32mPASSED[0m[31m    [ 34%][0m
test/widget/test_groupbox2.py::test_screen_focus[x11-gbmanager0-2] [32mPASSED[0m[31m [ 34%][0m
test/widget/test_groupbox2.py::test_line_widths[1-x11-gbmanager0] [32mPASSED[0m[31m [ 34%][0m
test/widget/test_groupbox2.py::test_block[1-x11-gbmanager0] [32mPASSED[0m[31m       [ 35%][0m
test/widget/test_groupbox2.py::test_custom_draw[1-x11-gbmanager0] [32mPASSED[0m[31m [ 35%][0m
test/widget/test_groupbox2.py::test_set_text[1-x11-gbmanager0] [32mPASSED[0m[31m    [ 35%][0m
test/widget/test_groupbox2.py::test_image[1-x11-gbmanager0] [31mFAILED[0m[31m       [ 36%][0m
test/widget/test_groupbox2.py::test_group_name[1-x11-gbmanager0] [32mPASSED[0m[31m  [ 36%][0m
test/widget/test_groupbox2.py::test_buttons[1-x11] [32mPASSED[0m[31m                [ 36%][0m
test/widget/test_groupbox2.py::test_visible_groups[1-x11-gbmanager0] [32mPASSED[0m[31m [ 37%][0m
test/widget/test_groupbox2.py::test_box_size[1-x11-gbmanager0] [32mPASSED[0m[31m    [ 37%][0m
test/widget/test_groupbox2.py::test_box_visibility[1-x11-gbmanager0] [32mPASSED[0m[31m [ 37%][0m
test/widget/test_image.py::test_image_size_mask[1-x11-image_manager0] [31mFAILED[0m[31m [ 38%][0m
test/widget/test_image.py::test_no_filename[1-x11] [32mPASSED[0m[31m                [ 38%][0m
test/widget/test_image.py::test_no_image[1-x11-image_manager0] [32mPASSED[0m[31m    [ 38%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-ALSAWidget-kwargs0] [32mPASSED[0m[31m [ 39%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-AnalogueClock-kwargs1] [32mPASSED[0m[31m [ 39%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-AnimatedImage-kwargs2] [32mPASSED[0m[31m [ 39%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-Bluetooth-kwargs3] [32mPASSED[0m[31m [ 40%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-BrightnessControl-kwargs4] [32mPASSED[0m[31m [ 40%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-ContinuousPoll-kwargs5] [32mPASSED[0m[31m [ 40%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-CurrentLayoutIcon-kwargs6] [32mPASSED[0m[31m [ 40%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-CPUGraph-kwargs7] [32mPASSED[0m[31m [ 41%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-GithubNotifications-kwargs8] [31mFAILED[0m[31m [ 41%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-GlobalMenu-kwargs9] [32mPASSED[0m[31m [ 41%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-GroupBox2-kwargs10] [32mPASSED[0m[31m [ 42%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-HDDGraph-kwargs11] [32mPASSED[0m[31m [ 42%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-HDDBusyGraph-kwargs12] [32mPASSED[0m[31m [ 42%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-Image-kwargs13] [32mPASSED[0m[31m [ 43%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-IWD-kwargs14] [32mPASSED[0m[31m [ 43%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-LiveFootballScores-kwargs15] [32mPASSED[0m[31m [ 43%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-MemoryGraph-kwargs16] [32mPASSED[0m[31m [ 44%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-Mpris2-kwargs17] [32mPASSED[0m[31m [ 44%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-NetGraph-kwargs18] [32mPASSED[0m[31m [ 44%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-PulseVolume-kwargs19] [32mPASSED[0m[31m [ 45%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-PulseVolumeExtra-kwargs20] [32mPASSED[0m[31m [ 45%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-ScriptExit-kwargs21] [32mPASSED[0m[31m [ 45%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-SnapCast-kwargs22] [31mFAILED[0m[31m [ 46%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-StatusNotifier-kwargs23] [32mPASSED[0m[31m [ 46%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-import_error_wrapper-kwargs24] [33mSKIPPED[0m[31m [ 46%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-SwapGraph-kwargs25] [32mPASSED[0m[31m [ 46%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-Syncthing-kwargs26] [31mFAILED[0m[31m [ 47%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-Systray-kwargs27] [32mPASSED[0m[31m [ 47%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-TVHWidget-kwargs28] [31mFAILED[0m[31m [ 47%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-UnitStatus-kwargs29] [32mPASSED[0m[31m [ 48%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-UPowerWidget-kwargs30] [32mPASSED[0m[31m [ 48%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-WiFiIcon-kwargs31] [32mPASSED[0m[31m [ 48%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-WordClock-kwargs32] [32mPASSED[0m[31m [ 49%][0m
test/widget/test_init_configure.py::test_widget_init_config[1-x11-StatusNotifier-kwargs33] [32mPASSED[0m[31m [ 49%][0m
test/widget/test_livefootballscores.py::test_scores_display_and_navigation[1-x11] [32mPASSED[0m[31m [ 49%][0m
test/widget/test_livefootballscores.py::test_widget_reboot[1-x11] [32mPASSED[0m[31m [ 50%][0m
test/widget/test_livefootballscores.py::test_widget_info[1-x11] [32mPASSED[0m[31m   [ 50%][0m
test/widget/test_livefootballscores.py::test_widget_popup[1-x11] [32mPASSED[0m[31m  [ 50%][0m
test/widget/test_livefootballscores.py::test_widget_refresh[1-x11] [32mPASSED[0m[31m [ 51%][0m
test/widget/test_network.py::test_wifiicon[1-x11] [32mPASSED[0m[31m                 [ 51%][0m
test/widget/test_popup_mixin.py::test_popup_mixin[1-x11-PopupConfig] [33mXFAIL[0m[31m [ 51%][0m
test/widget/test_scriptexit.py::test_exit[1-x11] [32mPASSED[0m[31m                  [ 52%][0m
test/widget/test_snapcast.py::test_snapcast_icon[1-x11-snapcast_manager0-49] [31mFAILED[0m[31m [ 52%][0m
test/widget/test_snapcast.py::test_snapcast_icon[1-x11-snapcast_manager1-26] [31mFAILED[0m[31m [ 52%][0m
test/widget/test_snapcast.py::test_snapcast_icon_colour[1-x11-snapcast_manager0-ffffff] [31mFAILED[0m[31m [ 53%][0m
test/widget/test_snapcast.py::test_snapcast_icon_colour[1-x11-snapcast_manager1-ffff00] [31mFAILED[0m[31m [ 53%][0m
test/widget/test_snapcast.py::test_snapcast_http_error[1-x11-error] [31mFAILED[0m[31m [ 53%][0m
test/widget/test_syncthing.py::test_syncthing_not_syncing[1-x11-syncthing_manager0-0-False] [31mFAILED[0m[31m [ 53%][0m
test/widget/test_syncthing.py::test_syncthing_not_syncing[1-x11-syncthing_manager1-49-False] [31mFAILED[0m[31m [ 54%][0m
test/widget/test_syncthing.py::test_syncthing_is_syncing[1-x11-syncthing_manager0-49-True] [31mFAILED[0m[31m [ 54%][0m
test/widget/test_syncthing.py::test_syncthing_is_syncing[1-x11-syncthing_manager1-49-True] [31mFAILED[0m[31m [ 54%][0m
test/widget/test_syncthing.py::test_syncthing_is_syncing[1-x11-syncthing_manager2-16-True] [31mFAILED[0m[31m [ 55%][0m
test/widget/test_syncthing.py::test_syncthing_is_syncing[1-x11-syncthing_manager3-127-True] [31mFAILED[0m[31m [ 55%][0m
test/widget/test_syncthing.py::test_syncthing_is_syncing[1-x11-syncthing_manager4-102-True] [31mFAILED[0m[31m [ 55%][0m
test/widget/test_syncthing.py::test_syncthing_is_syncing[1-x11-syncthing_manager5-81-True] [31mFAILED[0m[31m [ 56%][0m
test/widget/test_syncthing.py::test_syncthing_no_api_key[1-x11-syncthing_manager0-True] [32mPASSED[0m[31m [ 56%][0m
test/widget/test_syncthing.py::test_syncthing_http_error[1-x11-error] [31mFAILED[0m[31m [ 56%][0m
test/widget/test_tooltip.py::test_tooltip_display[1-x11] [33mXFAIL[0m (Last...)[31m [ 57%][0m
test/widget/test_tooltip.py::test_tooltip_position[1-x11-top-pos0-expected0] [32mPASSED[0m[31m [ 57%][0m
test/widget/test_tooltip.py::test_tooltip_position[1-x11-bottom-pos1-expected1] [32mPASSED[0m[31m [ 57%][0m
test/widget/test_tooltip.py::test_tooltip_position[1-x11-left-pos2-expected2] [32mPASSED[0m[31m [ 58%][0m
test/widget/test_tooltip.py::test_tooltip_position[1-x11-right-pos3-expected3] [32mPASSED[0m[31m [ 58%][0m
test/widget/test_tooltip.py::test_tooltip_padding[1-x11-tooltip_manager0-expected0] [32mPASSED[0m[31m [ 58%][0m
test/widget/test_tooltip.py::test_tooltip_padding[1-x11-tooltip_manager1-expected1] [32mPASSED[0m[31m [ 59%][0m
test/widget/test_tooltip.py::test_tooltip_padding[1-x11-tooltip_manager2-expected2] [32mPASSED[0m[31m [ 59%][0m
test/widget/test_tooltip.py::test_tooltip_padding[1-x11-tooltip_manager3-expected3] [32mPASSED[0m[31m [ 59%][0m
test/widget/test_tooltip.py::test_tooltip_padding[1-x11-tooltip_manager4-expected4] [32mPASSED[0m[31m [ 60%][0m
test/widget/test_tooltip.py::test_tooltip_cancel_timer[1-x11-tooltip_manager0] [32mPASSED[0m[31m [ 60%][0m
test/widget/test_tvhwidget.py::test_tvh_widget_not_recording[1-x11-tvh_manager0] [31mFAILED[0m[31m [ 60%][0m
test/widget/test_tvhwidget.py::test_tvh_widget_recording[1-x11-tvh_manager0] [31mFAILED[0m[31m [ 60%][0m
test/widget/test_tvhwidget.py::test_tvh_widget_popup[1-x11-tvh_manager0] [31mFAILED[0m[31m [ 61%][0m
test/widget/test_unitstatus.py::test_unit_status_defaults[1-x11] [32mPASSED[0m[31m  [ 61%][0m
test/widget/test_wordclock.py::test_wordclock_language[1-x11-dutch] [32mPASSED[0m[31m [ 61%][0m
test/widget/test_wordclock.py::test_wordclock_language[1-x11-english] [32mPASSED[0m[31m [ 62%][0m
test/widget/test_wordclock.py::test_wordclock_language[1-x11-finnish] [32mPASSED[0m[31m [ 62%][0m
test/widget/test_wordclock.py::test_wordclock_language[1-x11-french] [32mPASSED[0m[31m [ 62%][0m
test/widget/test_wordclock.py::test_wordclock_language[1-x11-portuguese] [32mPASSED[0m[31m [ 63%][0m
test/widget/test_wordclock.py::test_wordclock_language[1-x11-spanish] [32mPASSED[0m[31m [ 63%][0m
test/widget/test_wordclock.py::test_wordclock_language[1-x11-swedish] [32mPASSED[0m[31m [ 63%][0m
test/layout/decorations/test_border_decorations.py::test_decoration_config_errors[GradientBorder-config0] [32mPASSED[0m[31m [ 64%][0m
test/layout/decorations/test_border_decorations.py::test_decoration_config_errors[GradientBorder-config1] [32mPASSED[0m[31m [ 64%][0m
test/layout/decorations/test_border_decorations.py::test_decoration_config_errors[GradientBorder-config2] [32mPASSED[0m[31m [ 64%][0m
test/layout/decorations/test_border_decorations.py::test_decoration_config_errors[GradientFrame-config3] [32mPASSED[0m[31m [ 65%][0m
test/layout/decorations/test_border_decorations.py::test_decoration_config_errors[GradientFrame-config4] [32mPASSED[0m[31m [ 65%][0m
test/layout/decorations/test_border_decorations.py::test_decoration_config_errors[ScreenGradientBorder-config5] [32mPASSED[0m[31m [ 65%][0m
test/layout/decorations/test_border_decorations.py::test_decoration_config_errors[ScreenGradientBorder-config6] [32mPASSED[0m[31m [ 66%][0m
test/layout/decorations/test_border_decorations.py::test_decoration_config_errors[ScreenGradientBorder-config7] [32mPASSED[0m[31m [ 66%][0m
test/layout/decorations/test_border_decorations.py::test_decoration_config_errors[SolidEdge-config8] [32mPASSED[0m[31m [ 66%][0m
test/layout/decorations/test_border_decorations.py::test_decoration_config_errors[SolidEdge-config9] [32mPASSED[0m[31m [ 66%][0m
test/layout/decorations/test_border_decorations.py::test_decoration_config_errors[SolidEdge-config10] [32mPASSED[0m[31m [ 67%][0m
test/layout/decorations/test_border_decorations.py::test_decoration_config_errors[CustomBorder-config11] [32mPASSED[0m[31m [ 67%][0m
test/layout/decorations/test_border_decorations.py::test_decoration_config_errors[CustomBorder-config12] [32mPASSED[0m[31m [ 67%][0m
test/layout/decorations/test_border_decorations.py::test_decoration_config_errors[CustomBorder-config13] [32mPASSED[0m[31m [ 68%][0m
test/layout/decorations/test_border_decorations.py::test_conditional_border_width_default [32mPASSED[0m[31m [ 68%][0m
test/layout/decorations/test_border_decorations.py::test_conditional_border_width_matching [32mPASSED[0m[31m [ 68%][0m
test/popup/test_toolkit.py::test_disable_navigation [32mPASSED[0m[31m               [ 69%][0m
test/popup/test_toolkit.py::test_initial_focus_index_error [32mPASSED[0m[31m        [ 69%][0m
test/test_bar.py::test_bar_deprecation [32mPASSED[0m[31m                            [ 69%][0m
test/test_images.py::test_loader[kwargs0-Img] [32mPASSED[0m[31m                     [ 70%][0m
test/test_images.py::test_loader[kwargs1-ImgMask] [32mPASSED[0m[31m                 [ 70%][0m
test/widget/decorations/test_widget_decorations.py::test_single_or_four [32mPASSED[0m[31m [ 70%][0m
test/widget/decorations/test_widget_decorations.py::test_single_or_four_logging [32mPASSED[0m[31m [ 71%][0m
test/widget/test_alsawidget.py::test_no_amixer [32mPASSED[0m[31m                    [ 71%][0m
test/widget/test_alsawidget.py::test_no_theme_path [32mPASSED[0m[31m                [ 71%][0m
test/widget/test_analogueclock.py::test_analogueclock_hand_angles [32mPASSED[0m[31m [ 72%][0m
test/widget/test_brightness_control.py::test_brightness_logging_no_max [32mPASSED[0m[31m [ 72%][0m
test/widget/test_brightness_control.py::test_brightness_logging_power_saving [32mPASSED[0m[31m [ 72%][0m
test/widget/test_brightness_control.py::test_brightness_logging_invalid_file [32mPASSED[0m[31m [ 73%][0m
test/widget/test_brightness_control.py::test_brightness_logging_invalid_value [32mPASSED[0m[31m [ 73%][0m
test/widget/test_brightness_control.py::test_brightness_deprecated_font_colour [32mPASSED[0m[31m [ 73%][0m
test/widget/test_githubnotifications.py::test_githubnotifications_timer_cancel [32mPASSED[0m[31m [ 73%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config0-args0-True] [32mPASSED[0m[31m [ 74%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config1-args1-True] [32mPASSED[0m[31m [ 74%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config2-args2-True] [32mPASSED[0m[31m [ 74%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config3-args3-True] [32mPASSED[0m[31m [ 75%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config4-args4-True] [32mPASSED[0m[31m [ 75%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config5-args5-True] [32mPASSED[0m[31m [ 75%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config6-args6-True] [32mPASSED[0m[31m [ 76%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config7-args7-True] [32mPASSED[0m[31m [ 76%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config8-args8-True] [32mPASSED[0m[31m [ 76%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config9-args9-True] [32mPASSED[0m[31m [ 77%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config10-args10-True] [32mPASSED[0m[31m [ 77%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config11-args11-False] [32mPASSED[0m[31m [ 77%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config12-args12-False] [32mPASSED[0m[31m [ 78%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config13-args13-False] [32mPASSED[0m[31m [ 78%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config14-args14-True] [32mPASSED[0m[31m [ 78%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config15-args15-False] [32mPASSED[0m[31m [ 79%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config16-args16-False] [32mPASSED[0m[31m [ 79%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config17-args17-False] [32mPASSED[0m[31m [ 79%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config18-args18-True] [32mPASSED[0m[31m [ 80%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config19-args19-True] [32mPASSED[0m[31m [ 80%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config20-args20-True] [32mPASSED[0m[31m [ 80%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config21-args21-False] [32mPASSED[0m[31m [ 80%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config22-args22-True] [32mPASSED[0m[31m [ 81%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config23-args23-False] [32mPASSED[0m[31m [ 81%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config24-args24-True] [32mPASSED[0m[31m [ 81%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config25-args25-False] [32mPASSED[0m[31m [ 82%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config26-args26-True] [32mPASSED[0m[31m [ 82%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config27-args27-True] [32mPASSED[0m[31m [ 82%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config28-args28-True] [32mPASSED[0m[31m [ 83%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config29-args29-False] [32mPASSED[0m[31m [ 83%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config30-args30-False] [32mPASSED[0m[31m [ 83%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config31-args31-True] [32mPASSED[0m[31m [ 84%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config32-args32-True] [32mPASSED[0m[31m [ 84%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config33-args33-False] [32mPASSED[0m[31m [ 84%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config34-args34-False] [32mPASSED[0m[31m [ 85%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config35-args35-True] [32mPASSED[0m[31m [ 85%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config36-args36-True] [32mPASSED[0m[31m [ 85%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config37-args37-False] [32mPASSED[0m[31m [ 86%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config38-args38-True] [32mPASSED[0m[31m [ 86%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config39-args39-False] [32mPASSED[0m[31m [ 86%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config40-args40-False] [32mPASSED[0m[31m [ 86%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config41-args41-False] [32mPASSED[0m[31m [ 87%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config42-args42-True] [32mPASSED[0m[31m [ 87%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config43-args43-True] [32mPASSED[0m[31m [ 87%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config44-args44-True] [32mPASSED[0m[31m [ 88%][0m
test/widget/test_groupbox2.py::test_groupboxrules[config45-args45-False] [32mPASSED[0m[31m [ 88%][0m
test/widget/test_groupbox2.py::test_repr[format0-when0-<GroupBoxRule format() when()>] [32mPASSED[0m[31m [ 88%][0m
test/widget/test_groupbox2.py::test_repr[format1-when1-<GroupBoxRule format(text=None) when()>] [32mPASSED[0m[31m [ 89%][0m
test/widget/test_groupbox2.py::test_repr[format2-when2-<GroupBoxRule format(block_colour=ff00ff, text=text) when(occupied=True)>] [32mPASSED[0m[31m [ 89%][0m
test/widget/test_groupbox2.py::test_repr[format3-when3-<GroupBoxRule format(line_position=LinePosition.TOP) when(screen=ScreenRule.THIS)>] [32mPASSED[0m[31m [ 89%][0m
test/widget/test_injection_wrapper.py::test_no_initialise [32mPASSED[0m[31m         [ 90%][0m
test/widget/test_injection_wrapper.py::test_initialise [32mPASSED[0m[31m            [ 90%][0m
test/widget/test_livefootballscores.py::test_footballmatch_module_equality [32mPASSED[0m[31m [ 90%][0m
test/widget/test_livefootballscores.py::test_footballmatch_module_inequality [32mPASSED[0m[31m [ 91%][0m
test/widget/test_livefootballscores.py::test_footballmatch_module_matchdate [32mPASSED[0m[31m [ 91%][0m
test/widget/test_livefootballscores.py::test_footballmatch_module_scanleagues [32mPASSED[0m[31m [ 91%][0m
test/widget/test_livefootballscores.py::test_footballmatch_module_no_matchdata [32mPASSED[0m[31m [ 92%][0m
test/widget/test_livefootballscores.py::test_footballmatch_module_format_match [32mPASSED[0m[31m [ 92%][0m
test/widget/test_livefootballscores.py::test_footballmatch_module_kickoff_time [32mPASSED[0m[31m [ 92%][0m
test/widget/test_livefootballscores.py::test_footballmatch_module_last_events [32mPASSED[0m[31m [ 93%][0m
test/widget/test_livefootballscores.py::test_league_module_update [32mPASSED[0m[31m [ 93%][0m
test/widget/test_livefootballscores.py::test_league_module_tournament_name [32mPASSED[0m[31m [ 93%][0m
test/widget/test_livefootballscores.py::test_matchevent_module [32mPASSED[0m[31m    [ 93%][0m
test/widget/test_livefootballscores.py::test_livefootballscores_deprecated_font_colour [32mPASSED[0m[31m [ 94%][0m
test/widget/test_mpris2.py::test_mpris2_parse_artwork[file:///path/to/local/file-/path/to/local/file] [32mPASSED[0m[31m [ 94%][0m
test/widget/test_mpris2.py::test_mpris2_parse_artwork[https://open.spotify.com/image/ab67616d00001e025d8eb7e49ddb4a793f00044d-https://i.scdn.co/image/ab67616d00001e025d8eb7e49ddb4a793f00044d] [32mPASSED[0m[31m [ 94%][0m
test/widget/test_network.py::test_wifiicon_deprecated_font_colour [32mPASSED[0m[31m [ 95%][0m
test/widget/test_popup_mixin.py::test_popup_missing_method [32mPASSED[0m[31m        [ 95%][0m
test/widget/test_scriptexit.py::test_error_handling [32mPASSED[0m[31m               [ 95%][0m
test/widget/test_snapcast.py::test_snapcast_options [31mFAILED[0m[31m               [ 96%][0m
test/widget/test_statusnotifier.py::test_statusnotifier_dbusmenuitem_repr [32mPASSED[0m[31m [ 96%][0m
test/widget/test_statusnotifier.py::test_statusnotifier_dbusmenu_errors [32mPASSED[0m[31m [ 96%][0m
test/widget/test_tvhwidget.py::test_tvh_widget_auth[digest-HTTPDigestAuth] [32mPASSED[0m[31m [ 97%][0m
test/widget/test_tvhwidget.py::test_tvh_widget_auth[basic-HTTPBasicAuth] [32mPASSED[0m[31m [ 97%][0m
test/widget/test_tvhwidget.py::test_tvh_widget_auth[other-HTTPBasicAuth] [32mPASSED[0m[31m [ 97%][0m
test/widget/test_unitstatus.py::test_unit_status_invalid_bus [32mPASSED[0m[31m      [ 98%][0m
test/widget/test_unitstatus.py::test_unit_status_session_bus [32mPASSED[0m[31m      [ 98%][0m
test/widget/test_unitstatus.py::test_unit_status_check_properties [32mPASSED[0m[31m [ 98%][0m
test/widget/test_unitstatus.py::test_unit_status_indicator_size [32mPASSED[0m[31m   [ 99%][0m
test/widget/test_widget_init.py::test_init_import_error [32mPASSED[0m[31m           [ 99%][0m
test/widget/test_widget_init.py::test_init_import_error_no_fallback [32mPASSED[0m[31m [ 99%][0m
test/widget/test_widget_init.py::test_init_widget_dir [32mPASSED[0m[31m             [100%][0m

==================================== ERRORS ====================================
[31m[1m____________________ ERROR at setup of test_default[1-x11] _____________________[0m

request = <SubRequest 'widget' for <Function test_default[1-x11]>>
manager_nospawn = <test.helpers.TestManager object at 0x7fffe6fc3fe0>

    @pytest.fixture(scope="function")
    def widget(request, manager_nospawn):
        class AnimatedImageConfig(libqtile.confreader.Config):
            auto_fullscreen = True
            keys = []
            mouse = []
            groups = [
                libqtile.config.Group("a"),
            ]
            layouts = [libqtile.layout.Max()]
            floating_layout = libqtile.resources.default_config.floating_layout
            screens = [
                libqtile.config.Screen(
                    top=libqtile.bar.Bar(
                        [
                            PatchedWidget(
                                filenames=[LOCAL_ICON, LOCAL_ICON, LOCAL_ICON],
                                name="animatedimage",
                                loop_interval=0.1,
                                **getattr(request, "param", dict())
                            )
                        ],
                        50,
                    ),
                )
            ]
    
        manager_nospawn.start(AnimatedImageConfig)
>       yield manager_nospawn.c.widget["animatedimage"]

[1m[31mtest/widget/test_animated_image.py[0m:97: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6faaff0>
name = 'animatedimage'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: animatedimage, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:57:36,476 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m PatchedWidget widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/animatedimage.py", line 66, in _configure
    self._load_images()
  File "/build/source/qtile_extras/widget/animatedimage.py", line 73, in _load_images
    img = self._load_image(filename)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/build/source/qtile_extras/widget/animatedimage.py", line 97, in _load_image
    img.resize(height=new_height)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m_____________ ERROR at setup of test_multiple_loops[1-x11-widget0] _____________[0m

request = <SubRequest 'widget' for <Function test_multiple_loops[1-x11-widget0]>>
manager_nospawn = <test.helpers.TestManager object at 0x7fffe6fc14f0>

    @pytest.fixture(scope="function")
    def widget(request, manager_nospawn):
        class AnimatedImageConfig(libqtile.confreader.Config):
            auto_fullscreen = True
            keys = []
            mouse = []
            groups = [
                libqtile.config.Group("a"),
            ]
            layouts = [libqtile.layout.Max()]
            floating_layout = libqtile.resources.default_config.floating_layout
            screens = [
                libqtile.config.Screen(
                    top=libqtile.bar.Bar(
                        [
                            PatchedWidget(
                                filenames=[LOCAL_ICON, LOCAL_ICON, LOCAL_ICON],
                                name="animatedimage",
                                loop_interval=0.1,
                                **getattr(request, "param", dict())
                            )
                        ],
                        50,
                    ),
                )
            ]
    
        manager_nospawn.start(AnimatedImageConfig)
>       yield manager_nospawn.c.widget["animatedimage"]

[1m[31mtest/widget/test_animated_image.py[0m:97: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6fa96d0>
name = 'animatedimage'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: animatedimage, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:57:36,770 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m PatchedWidget widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/animatedimage.py", line 66, in _configure
    self._load_images()
  File "/build/source/qtile_extras/widget/animatedimage.py", line 73, in _load_images
    img = self._load_image(filename)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/build/source/qtile_extras/widget/animatedimage.py", line 97, in _load_image
    img.resize(height=new_height)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m__________________ ERROR at setup of test_stop[1-x11-widget0] __________________[0m

request = <SubRequest 'widget' for <Function test_stop[1-x11-widget0]>>
manager_nospawn = <test.helpers.TestManager object at 0x7fffe6fc3260>

    @pytest.fixture(scope="function")
    def widget(request, manager_nospawn):
        class AnimatedImageConfig(libqtile.confreader.Config):
            auto_fullscreen = True
            keys = []
            mouse = []
            groups = [
                libqtile.config.Group("a"),
            ]
            layouts = [libqtile.layout.Max()]
            floating_layout = libqtile.resources.default_config.floating_layout
            screens = [
                libqtile.config.Screen(
                    top=libqtile.bar.Bar(
                        [
                            PatchedWidget(
                                filenames=[LOCAL_ICON, LOCAL_ICON, LOCAL_ICON],
                                name="animatedimage",
                                loop_interval=0.1,
                                **getattr(request, "param", dict())
                            )
                        ],
                        50,
                    ),
                )
            ]
    
        manager_nospawn.start(AnimatedImageConfig)
>       yield manager_nospawn.c.widget["animatedimage"]

[1m[31mtest/widget/test_animated_image.py[0m:97: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6f36f60>
name = 'animatedimage'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: animatedimage, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:57:37,056 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m PatchedWidget widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/animatedimage.py", line 66, in _configure
    self._load_images()
  File "/build/source/qtile_extras/widget/animatedimage.py", line 73, in _load_images
    img = self._load_image(filename)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/build/source/qtile_extras/widget/animatedimage.py", line 97, in _load_image
    img.resize(height=new_height)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m_________________ ERROR at setup of test_width_default[1-x11] __________________[0m

request = <SubRequest 'widget' for <Function test_width_default[1-x11]>>
manager_nospawn = <test.helpers.TestManager object at 0x7fffe6f36ed0>

    @pytest.fixture(scope="function")
    def widget(request, manager_nospawn):
        class AnimatedImageConfig(libqtile.confreader.Config):
            auto_fullscreen = True
            keys = []
            mouse = []
            groups = [
                libqtile.config.Group("a"),
            ]
            layouts = [libqtile.layout.Max()]
            floating_layout = libqtile.resources.default_config.floating_layout
            screens = [
                libqtile.config.Screen(
                    top=libqtile.bar.Bar(
                        [
                            PatchedWidget(
                                filenames=[LOCAL_ICON, LOCAL_ICON, LOCAL_ICON],
                                name="animatedimage",
                                loop_interval=0.1,
                                **getattr(request, "param", dict())
                            )
                        ],
                        50,
                    ),
                )
            ]
    
        manager_nospawn.start(AnimatedImageConfig)
>       yield manager_nospawn.c.widget["animatedimage"]

[1m[31mtest/widget/test_animated_image.py[0m:97: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe7002030>
name = 'animatedimage'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: animatedimage, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:57:37,344 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m PatchedWidget widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/animatedimage.py", line 66, in _configure
    self._load_images()
  File "/build/source/qtile_extras/widget/animatedimage.py", line 73, in _load_images
    img = self._load_image(filename)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/build/source/qtile_extras/widget/animatedimage.py", line 97, in _load_image
    img.resize(height=new_height)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m____________ ERROR at setup of test_width_no_padding[1-x11-widget0] ____________[0m

request = <SubRequest 'widget' for <Function test_width_no_padding[1-x11-widget0]>>
manager_nospawn = <test.helpers.TestManager object at 0x7fffe7002210>

    @pytest.fixture(scope="function")
    def widget(request, manager_nospawn):
        class AnimatedImageConfig(libqtile.confreader.Config):
            auto_fullscreen = True
            keys = []
            mouse = []
            groups = [
                libqtile.config.Group("a"),
            ]
            layouts = [libqtile.layout.Max()]
            floating_layout = libqtile.resources.default_config.floating_layout
            screens = [
                libqtile.config.Screen(
                    top=libqtile.bar.Bar(
                        [
                            PatchedWidget(
                                filenames=[LOCAL_ICON, LOCAL_ICON, LOCAL_ICON],
                                name="animatedimage",
                                loop_interval=0.1,
                                **getattr(request, "param", dict())
                            )
                        ],
                        50,
                    ),
                )
            ]
    
        manager_nospawn.start(AnimatedImageConfig)
>       yield manager_nospawn.c.widget["animatedimage"]

[1m[31mtest/widget/test_animated_image.py[0m:97: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe7001220>
name = 'animatedimage'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: animatedimage, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:57:37,627 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m PatchedWidget widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/animatedimage.py", line 66, in _configure
    self._load_images()
  File "/build/source/qtile_extras/widget/animatedimage.py", line 73, in _load_images
    img = self._load_image(filename)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/build/source/qtile_extras/widget/animatedimage.py", line 97, in _load_image
    img.resize(height=new_height)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
=================================== FAILURES ===================================
[31m[1m_______________________________ test_draw[1-x11] _______________________________[0m

minimal_conf_noscreen = <class 'test.conftest.minimal_conf_noscreen.<locals>.MinimalConf'>
manager_nospawn = <test.helpers.TestManager object at 0x7fffe6fc1940>

    def test_draw(minimal_conf_noscreen, manager_nospawn):
        class MaskWidget(_Widget):
            def __init__(self):
                _Widget.__init__(self, bar.CALCULATED)
    
            def _configure(self, qtile, bar):
                _Widget._configure(self, qtile, bar)
                self.img = ImgMask.from_path(f"{ICON_PATH}/icon.svg")
                self.img.attach_drawer(self.drawer)
                self.img.resize(self.bar.height - 1)
    
            def calculate_length(self):
                if not self.configured:
                    return 0
    
                return self.img.width
    
            def draw(self):
                self.drawer.clear(self.background or self.bar.background)
                self.img.draw()
                self.drawer.draw(offsetx=self.offset, offsety=self.offsety, width=self.length)
    
        config = minimal_conf_noscreen
        config.screens = [libqtile.config.Screen(top=bar.Bar([MaskWidget()], 10))]
    
        manager_nospawn.start(config)
    
>       assert manager_nospawn.c.widget["maskwidget"]

[1m[31mtest/test_images.py[0m:68: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6f368a0>
name = 'maskwidget'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: maskwidget, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
----------------------------- Captured stdout call -----------------------------
[0m[31m2024-10-19 20:57:30,014 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m MaskWidget widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/test/test_images.py", line 50, in _configure
    self.img.resize(self.bar.height - 1)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
----------------------------- Captured stderr call -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m_____________ test_githubnotifications_colours[1-x11-False-808080] _____________[0m

githubnotification_manager = <test.helpers.TestManager object at 0x7fffe7000470>
expected = '808080'

    @pytest.mark.parametrize(
        "response,expected",
        [(False, COLOUR_INACTIVE), (True, COLOUR_ACTIVE), (ERROR, COLOUR_ERROR)],
        indirect=["response"],
    )
    def test_githubnotifications_colours(githubnotification_manager, expected):
>       githubnotification_manager.c.widget["githubnotifications"].eval("self.update()")

[1m[31mtest/widget/test_githubnotifications.py[0m:129: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6f35670>
name = 'githubnotifications'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: githubnotifications, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:57:44,362 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m GithubNotifications widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 88, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 110, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m_____________ test_githubnotifications_colours[1-x11-True-ffffff] ______________[0m

githubnotification_manager = <test.helpers.TestManager object at 0x7fffe6fc0050>
expected = 'ffffff'

    @pytest.mark.parametrize(
        "response,expected",
        [(False, COLOUR_INACTIVE), (True, COLOUR_ACTIVE), (ERROR, COLOUR_ERROR)],
        indirect=["response"],
    )
    def test_githubnotifications_colours(githubnotification_manager, expected):
>       githubnotification_manager.c.widget["githubnotifications"].eval("self.update()")

[1m[31mtest/widget/test_githubnotifications.py[0m:129: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6fc2c60>
name = 'githubnotifications'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: githubnotifications, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:57:44,653 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m GithubNotifications widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 88, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 110, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m_____________ test_githubnotifications_colours[1-x11-error-ffff00] _____________[0m

githubnotification_manager = <test.helpers.TestManager object at 0x7fffe7003350>
expected = 'ffff00'

    @pytest.mark.parametrize(
        "response,expected",
        [(False, COLOUR_INACTIVE), (True, COLOUR_ACTIVE), (ERROR, COLOUR_ERROR)],
        indirect=["response"],
    )
    def test_githubnotifications_colours(githubnotification_manager, expected):
>       githubnotification_manager.c.widget["githubnotifications"].eval("self.update()")

[1m[31mtest/widget/test_githubnotifications.py[0m:129: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe7002c00>
name = 'githubnotifications'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: githubnotifications, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:57:44,937 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m GithubNotifications widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 88, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 110, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m_ test_githubnotifications_logging[1-x11-False-githubnotification_manager0-expected0] _[0m

githubnotification_manager = <test.helpers.TestManager object at 0x7fffe7003ad0>
logger = <_pytest.logging.LogCaptureFixture object at 0x7fffe769fef0>
expected = ('No token_file provided.', 'No access token provided.')

    @pytest.mark.parametrize(
        "response,githubnotification_manager,expected",
        [
            (
                False,
                {"token_file": "/does/not/exist"},
                ("No token_file provided.", "No access token provided."),
            ),
            (ERROR, {}, (None, "Github returned a 401 status code.")),
        ],
        indirect=["response", "githubnotification_manager"],
    )
    @pytest.mark.flaky(reruns=5)
    def test_githubnotifications_logging(githubnotification_manager, logger, expected):
        setup, call = expected
    
        if setup:
            recs = logger.get_records("setup")
            assert recs
            assert recs[0].msg == setup
    
        if call:
            # The http request is in an asyncio future so we need to wait for
            # this to complete to check the log
>           githubnotification_manager.c.widget["githubnotifications"].eval("self.update()")

[1m[31mtest/widget/test_githubnotifications.py[0m:161: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6f37620>
name = 'githubnotifications'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: githubnotifications, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:57:45,202 [1m[31mlibqtile githubnotifications.py:_load_token():L94 [0m No token_file provided.[0m
[0m[31m2024-10-19 20:57:45,219 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m GithubNotifications widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 88, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 110, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
------------------------------ Captured log setup ------------------------------
[31m[1mERROR   [0m libqtile:githubnotifications.py:94 No token_file provided.
------------------------------ Captured log call -------------------------------
[31m[1mERROR   [0m libqtile:bar.py:391 GithubNotifications widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 88, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 110, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'
[31m[1m_ test_githubnotifications_logging[1-x11-error-githubnotification_manager1-expected1] _[0m

githubnotification_manager = <test.helpers.TestManager object at 0x7fffe70010d0>
logger = <_pytest.logging.LogCaptureFixture object at 0x7fffe6fc2bd0>
expected = (None, 'Github returned a 401 status code.')

    @pytest.mark.parametrize(
        "response,githubnotification_manager,expected",
        [
            (
                False,
                {"token_file": "/does/not/exist"},
                ("No token_file provided.", "No access token provided."),
            ),
            (ERROR, {}, (None, "Github returned a 401 status code.")),
        ],
        indirect=["response", "githubnotification_manager"],
    )
    @pytest.mark.flaky(reruns=5)
    def test_githubnotifications_logging(githubnotification_manager, logger, expected):
        setup, call = expected
    
        if setup:
            recs = logger.get_records("setup")
            assert recs
            assert recs[0].msg == setup
    
        if call:
            # The http request is in an asyncio future so we need to wait for
            # this to complete to check the log
>           githubnotification_manager.c.widget["githubnotifications"].eval("self.update()")

[1m[31mtest/widget/test_githubnotifications.py[0m:161: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6fc2ff0>
name = 'githubnotifications'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: githubnotifications, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:57:45,497 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m GithubNotifications widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 88, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 110, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
------------------------------ Captured log setup ------------------------------
[31m[1mERROR   [0m libqtile:bar.py:391 GithubNotifications widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 88, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 110, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'
[31m[1m__ test_githubnotifications_icon[1-x11-False-githubnotification_manager0-49] ___[0m

githubnotification_manager = <test.helpers.TestManager object at 0x7fffe6fc0770>
expected = 49

    @pytest.mark.parametrize(
        "response,githubnotification_manager,expected",
        [(False, {}, DEFAULT_ICON_SIZE + 2 * PADDING), (False, {"icon_size": 10}, 10 + 2 * PADDING)],
        indirect=["response", "githubnotification_manager"],
    )
    def test_githubnotifications_icon(githubnotification_manager, expected):
>       info = githubnotification_manager.c.widget["githubnotifications"].info()

[1m[31mtest/widget/test_githubnotifications.py[0m:175: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6fc37a0>
name = 'githubnotifications'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: githubnotifications, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:57:45,785 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m GithubNotifications widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 88, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 110, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m__ test_githubnotifications_icon[1-x11-False-githubnotification_manager1-16] ___[0m

githubnotification_manager = <test.helpers.TestManager object at 0x7fffe6fc1d90>
expected = 16

    @pytest.mark.parametrize(
        "response,githubnotification_manager,expected",
        [(False, {}, DEFAULT_ICON_SIZE + 2 * PADDING), (False, {"icon_size": 10}, 10 + 2 * PADDING)],
        indirect=["response", "githubnotification_manager"],
    )
    def test_githubnotifications_icon(githubnotification_manager, expected):
>       info = githubnotification_manager.c.widget["githubnotifications"].info()

[1m[31mtest/widget/test_githubnotifications.py[0m:175: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6fc3860>
name = 'githubnotifications'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: githubnotifications, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:57:46,087 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m GithubNotifications widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 88, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 110, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m_________________________ test_image[1-x11-gbmanager0] _________________________[0m

gbmanager = <test.helpers.TestManager object at 0x7fffe6fdec60>

    @pytest.mark.parametrize(
        "gbmanager",
        [{"rules": [GroupBoxRule(image=ICON.as_posix()).when(focused=True)]}],
        indirect=True,
    )
    def test_image(gbmanager):
>       info = gbmanager.c.widget["groupbox2"].info()

[1m[31mtest/widget/test_groupbox2.py[0m:373: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6fdc7a0>
name = 'groupbox2'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: groupbox2, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:57:56,354 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m GroupBox2 widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/groupbox2.py", line 866, in _configure
    Box(group, index, bar, qtile, self.drawer, self.box_config)
  File "/build/source/qtile_extras/widget/groupbox2.py", line 279, in __init__
    self._prepare()
  File "/build/source/qtile_extras/widget/groupbox2.py", line 311, in _prepare
    self._set_formats()
  File "/build/source/qtile_extras/widget/groupbox2.py", line 350, in _set_formats
    if not self._load_image(self.image):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/build/source/qtile_extras/widget/groupbox2.py", line 383, in _load_image
    img.resize(height=self.bar.height - 2 * self.margin_y)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m__________________ test_image_size_mask[1-x11-image_manager0] __________________[0m

image_manager = <test.helpers.TestManager object at 0x7fffe6f34e00>
logger = <_pytest.logging.LogCaptureFixture object at 0x7fffe6f359d0>

    @pytest.mark.parametrize(
        "image_manager",
        [
            {"filename": LOCAL_ICON, "mask": True},
        ],
        indirect=["image_manager"],
    )
    def test_image_size_mask(image_manager, logger):
        recs = logger.get_records("setup")
>       assert not recs
[1m[31mE       assert not [<LogRecord: libqtile, 40, /nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py, 391, "Image widget crashed during _configure with error:\nTraceback (most recent call last):\n  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size\n    return self._default_size\n           ^^^^^^^^^^^^^^^^^^\nAttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface\n    return self._default_surface\n           ^^^^^^^^^^^^^^^^^^^^^\nAttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py",...-packages/libqtile/images.py", line 56, in get_cairo_surface\n    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png\n    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__\n    self._check_status()\n  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status\n    _check_status(cairo.cairo_surface_status(self._pointer))\n  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status\n    raise exception(message, status)\ncairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'">][0m

[1m[31mtest/widget/test_image.py[0m:118: AssertionError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:04,150 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m Image widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/widget/image.py", line 51, in _configure
    self._update_image()
  File "/build/source/qtile_extras/widget/image.py", line 85, in _update_image
    img.resize(height=new_height)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
[0m[31m2024-10-19 20:58:04,195 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m Image widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/widget/image.py", line 51, in _configure
    self._update_image()
  File "/build/source/qtile_extras/widget/image.py", line 88, in _update_image
    img.resize(width=new_width)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
------------------------------ Captured log setup ------------------------------
[31m[1mERROR   [0m libqtile:bar.py:391 Image widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/widget/image.py", line 51, in _configure
    self._update_image()
  File "/build/source/qtile_extras/widget/image.py", line 85, in _update_image
    img.resize(height=new_height)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'
[31m[1mERROR   [0m libqtile:bar.py:391 Image widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/widget/image.py", line 51, in _configure
    self._update_image()
  File "/build/source/qtile_extras/widget/image.py", line 88, in _update_image
    img.resize(width=new_width)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'
[31m[1m__________ test_widget_init_config[1-x11-GithubNotifications-kwargs8] __________[0m

manager_nospawn = <test.helpers.TestManager object at 0x7fffe7002660>
minimal_conf_noscreen = <class 'test.widget.conftest.minimal_conf_noscreen.<locals>.MinimalConf'>
widget_class = <class 'qtile_extras.widget.githubnotifications.GithubNotifications'>
kwargs = {'widgetname': 'GithubNotifications'}

    @pytest.mark.parametrize("widget_class,kwargs", parameters)
    def test_widget_init_config(manager_nospawn, minimal_conf_noscreen, widget_class, kwargs):
        if widget_class in exclusive_backend:
            if exclusive_backend[widget_class] != manager_nospawn.backend.name:
                pytest.skip("Unsupported backend")
    
        widget = widget_class(**kwargs)
        widget.draw = no_op
    
        if isinstance(widget, ImportErrorWidget):
            pytest.skip(f"{kwargs['widgetname']} skipped: ImportError")
    
        # If widget inits ok then kwargs will now be attributes
        for k, v in kwargs.items():
            assert getattr(widget, k) == v
    
        # Test configuration
        config = minimal_conf_noscreen
        config.screens = [libqtile.config.Screen(top=libqtile.bar.Bar([widget], 10))]
    
        manager_nospawn.start(config)
    
        i = manager_nospawn.c.bar["top"].info()
    
        # Check widget is registered by checking names of widgets in bar
        allowed_names = [
            widget.name,
            "<no name>",  # systray is called "<no name>" as it subclasses _Window
        ]
>       assert i["widgets"][0]["name"] in allowed_names
[1m[31mE       AssertionError: assert 'configerrorwidget' in ['githubnotifications', '<no name>'][0m

[1m[31mtest/widget/test_init_configure.py[0m:114: AssertionError
----------------------------- Captured stdout call -----------------------------
[0m[31m2024-10-19 20:58:06,115 [1m[31mlibqtile githubnotifications.py:_load_token():L94 [0m No token_file provided.[0m
[0m[31m2024-10-19 20:58:06,134 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m GithubNotifications widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 88, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/githubnotifications.py", line 110, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
----------------------------- Captured stderr call -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m_______________ test_widget_init_config[1-x11-SnapCast-kwargs22] _______________[0m

manager_nospawn = <test.helpers.TestManager object at 0x7fffe70038f0>
minimal_conf_noscreen = <class 'test.widget.conftest.minimal_conf_noscreen.<locals>.MinimalConf'>
widget_class = <class 'qtile_extras.widget.snapcast.SnapCast'>
kwargs = {'widgetname': 'SnapCast'}

    @pytest.mark.parametrize("widget_class,kwargs", parameters)
    def test_widget_init_config(manager_nospawn, minimal_conf_noscreen, widget_class, kwargs):
        if widget_class in exclusive_backend:
            if exclusive_backend[widget_class] != manager_nospawn.backend.name:
                pytest.skip("Unsupported backend")
    
        widget = widget_class(**kwargs)
        widget.draw = no_op
    
        if isinstance(widget, ImportErrorWidget):
            pytest.skip(f"{kwargs['widgetname']} skipped: ImportError")
    
        # If widget inits ok then kwargs will now be attributes
        for k, v in kwargs.items():
            assert getattr(widget, k) == v
    
        # Test configuration
        config = minimal_conf_noscreen
        config.screens = [libqtile.config.Screen(top=libqtile.bar.Bar([widget], 10))]
    
        manager_nospawn.start(config)
    
        i = manager_nospawn.c.bar["top"].info()
    
        # Check widget is registered by checking names of widgets in bar
        allowed_names = [
            widget.name,
            "<no name>",  # systray is called "<no name>" as it subclasses _Window
        ]
>       assert i["widgets"][0]["name"] in allowed_names
[1m[31mE       AssertionError: assert 'configerrorwidget' in ['snapcast', '<no name>'][0m

[1m[31mtest/widget/test_init_configure.py[0m:114: AssertionError
----------------------------- Captured stdout call -----------------------------
[0m[31m2024-10-19 20:58:09,405 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m SnapCast widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/snapcast.py", line 93, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/snapcast.py", line 106, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
----------------------------- Captured stderr call -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m______________ test_widget_init_config[1-x11-Syncthing-kwargs26] _______________[0m

manager_nospawn = <test.helpers.TestManager object at 0x7fffe6fa9a30>
minimal_conf_noscreen = <class 'test.widget.conftest.minimal_conf_noscreen.<locals>.MinimalConf'>
widget_class = <class 'qtile_extras.widget.syncthing.Syncthing'>
kwargs = {'widgetname': 'Syncthing'}

    @pytest.mark.parametrize("widget_class,kwargs", parameters)
    def test_widget_init_config(manager_nospawn, minimal_conf_noscreen, widget_class, kwargs):
        if widget_class in exclusive_backend:
            if exclusive_backend[widget_class] != manager_nospawn.backend.name:
                pytest.skip("Unsupported backend")
    
        widget = widget_class(**kwargs)
        widget.draw = no_op
    
        if isinstance(widget, ImportErrorWidget):
            pytest.skip(f"{kwargs['widgetname']} skipped: ImportError")
    
        # If widget inits ok then kwargs will now be attributes
        for k, v in kwargs.items():
            assert getattr(widget, k) == v
    
        # Test configuration
        config = minimal_conf_noscreen
        config.screens = [libqtile.config.Screen(top=libqtile.bar.Bar([widget], 10))]
    
        manager_nospawn.start(config)
    
        i = manager_nospawn.c.bar["top"].info()
    
        # Check widget is registered by checking names of widgets in bar
        allowed_names = [
            widget.name,
            "<no name>",  # systray is called "<no name>" as it subclasses _Window
        ]
>       assert i["widgets"][0]["name"] in allowed_names
[1m[31mE       AssertionError: assert 'configerrorwidget' in ['syncthing', '<no name>'][0m

[1m[31mtest/widget/test_init_configure.py[0m:114: AssertionError
----------------------------- Captured stdout call -----------------------------
[0m[33m2024-10-19 20:58:09,932 [1m[33mlibqtile syncthing.py:_configure():L98 [0m API key not set.[0m
[0m[31m2024-10-19 20:58:09,957 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m Syncthing widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/syncthing.py", line 100, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/syncthing.py", line 112, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
----------------------------- Captured stderr call -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m______________ test_widget_init_config[1-x11-TVHWidget-kwargs28] _______________[0m

manager_nospawn = <test.helpers.TestManager object at 0x7fffe6fcd910>
minimal_conf_noscreen = <class 'test.widget.conftest.minimal_conf_noscreen.<locals>.MinimalConf'>
widget_class = <class 'qtile_extras.widget.tvheadend.TVHWidget'>
kwargs = {'widgetname': 'TVHWidget'}

    @pytest.mark.parametrize("widget_class,kwargs", parameters)
    def test_widget_init_config(manager_nospawn, minimal_conf_noscreen, widget_class, kwargs):
        if widget_class in exclusive_backend:
            if exclusive_backend[widget_class] != manager_nospawn.backend.name:
                pytest.skip("Unsupported backend")
    
        widget = widget_class(**kwargs)
        widget.draw = no_op
    
        if isinstance(widget, ImportErrorWidget):
            pytest.skip(f"{kwargs['widgetname']} skipped: ImportError")
    
        # If widget inits ok then kwargs will now be attributes
        for k, v in kwargs.items():
            assert getattr(widget, k) == v
    
        # Test configuration
        config = minimal_conf_noscreen
        config.screens = [libqtile.config.Screen(top=libqtile.bar.Bar([widget], 10))]
    
        manager_nospawn.start(config)
    
        i = manager_nospawn.c.bar["top"].info()
    
        # Check widget is registered by checking names of widgets in bar
        allowed_names = [
            widget.name,
            "<no name>",  # systray is called "<no name>" as it subclasses _Window
        ]
>       assert i["widgets"][0]["name"] in allowed_names
[1m[31mE       AssertionError: assert 'configerrorwidget' in ['tvhwidget', '<no name>'][0m

[1m[31mtest/widget/test_init_configure.py[0m:114: AssertionError
----------------------------- Captured stdout call -----------------------------
[0m[31m2024-10-19 20:58:10,513 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m TVHWidget widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/tvheadend.py", line 182, in _configure
    self.setup_images()
  File "/build/source/qtile_extras/widget/tvheadend.py", line 217, in setup_images
    img.resize(height=new_height)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
----------------------------- Captured stderr call -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m________________ test_snapcast_icon[1-x11-snapcast_manager0-49] ________________[0m

snapcast_manager = <test.helpers.TestManager object at 0x7fffe6fc1910>
expected = 49

    @pytest.mark.parametrize(
        "snapcast_manager,expected",
        [({}, DEFAULT_ICON_SIZE + 2 * PADDING), ({"icon_size": 20}, 20 + 2 * PADDING)],
        indirect=["snapcast_manager"],
    )
    def test_snapcast_icon(snapcast_manager, expected):
>       info = snapcast_manager.c.widget["snapcast"].info()

[1m[31mtest/widget/test_snapcast.py[0m:234: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe7003b90>
name = 'snapcast'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: snapcast, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:25,670 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m SnapCast widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/snapcast.py", line 93, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/snapcast.py", line 106, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m________________ test_snapcast_icon[1-x11-snapcast_manager1-26] ________________[0m

snapcast_manager = <test.helpers.TestManager object at 0x7fffe6fcde50>
expected = 26

    @pytest.mark.parametrize(
        "snapcast_manager,expected",
        [({}, DEFAULT_ICON_SIZE + 2 * PADDING), ({"icon_size": 20}, 20 + 2 * PADDING)],
        indirect=["snapcast_manager"],
    )
    def test_snapcast_icon(snapcast_manager, expected):
>       info = snapcast_manager.c.widget["snapcast"].info()

[1m[31mtest/widget/test_snapcast.py[0m:234: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6fcfd40>
name = 'snapcast'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: snapcast, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:25,946 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m SnapCast widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/snapcast.py", line 93, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/snapcast.py", line 106, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m__________ test_snapcast_icon_colour[1-x11-snapcast_manager0-ffffff] ___________[0m

snapcast_manager = <test.helpers.TestManager object at 0x7fffe6f356d0>
expected = 'ffffff'

    @pytest.mark.parametrize(
        "snapcast_manager,expected",
        [({}, COLOUR_ACTIVE), ({"client_name": "T500"}, COLOUR_ERROR)],
        indirect=["snapcast_manager"],
    )
    def test_snapcast_icon_colour(snapcast_manager, expected):
>       widget = snapcast_manager.c.widget["snapcast"]

[1m[31mtest/widget/test_snapcast.py[0m:244: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6f36000>
name = 'snapcast'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: snapcast, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:26,255 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m SnapCast widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/snapcast.py", line 93, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/snapcast.py", line 106, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m__________ test_snapcast_icon_colour[1-x11-snapcast_manager1-ffff00] ___________[0m

snapcast_manager = <test.helpers.TestManager object at 0x7fffe6574350>
expected = 'ffff00'

    @pytest.mark.parametrize(
        "snapcast_manager,expected",
        [({}, COLOUR_ACTIVE), ({"client_name": "T500"}, COLOUR_ERROR)],
        indirect=["snapcast_manager"],
    )
    def test_snapcast_icon_colour(snapcast_manager, expected):
>       widget = snapcast_manager.c.widget["snapcast"]

[1m[31mtest/widget/test_snapcast.py[0m:244: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe65755b0>
name = 'snapcast'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: snapcast, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:26,548 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m SnapCast widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/snapcast.py", line 93, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/snapcast.py", line 106, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m____________________ test_snapcast_http_error[1-x11-error] _____________________[0m

snapcast_manager = <test.helpers.TestManager object at 0x7fffe6f36060>
logger = <_pytest.logging.LogCaptureFixture object at 0x7fffe7001040>

    @pytest.mark.parametrize("response", [ERROR], indirect=True)
    @pytest.mark.flaky(reruns=5)
    def test_snapcast_http_error(snapcast_manager, logger):
>       wait_for_poll(snapcast_manager)

[1m[31mtest/widget/test_snapcast.py[0m:264: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
[1m[31mtest/helpers.py[0m:71: in wrapper
    return fn(*args, **kwargs)
[1m[31mtest/widget/test_snapcast.py[0m:160: in wait_for_poll
    _, streams = manager.c.widget["snapcast"].eval("hasattr(self, 'streams')")
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe7000860>
name = 'snapcast'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: snapcast, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:26,813 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m SnapCast widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/snapcast.py", line 93, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/snapcast.py", line 106, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
------------------------------ Captured log setup ------------------------------
[31m[1mERROR   [0m libqtile:bar.py:391 SnapCast widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/snapcast.py", line 93, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/snapcast.py", line 106, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'
[31m[1m_________ test_syncthing_not_syncing[1-x11-syncthing_manager0-0-False] _________[0m

syncthing_manager = <test.helpers.TestManager object at 0x7fffe7002b40>
expected = 0

    @pytest.mark.parametrize("is_syncing", [False], indirect=True)
    @pytest.mark.parametrize(
        "syncthing_manager,expected",
        [({}, 0), ({"hide_on_idle": False}, DEFAULT_ICON_SIZE + 2 * PADDING)],
        indirect=["syncthing_manager"],
    )
    def test_syncthing_not_syncing(syncthing_manager, expected):
>       info = syncthing_manager.c.widget["syncthing"].info()

[1m[31mtest/widget/test_syncthing.py[0m:129: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe7000830>
name = 'syncthing'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: syncthing, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:27,117 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m Syncthing widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/syncthing.py", line 100, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/syncthing.py", line 112, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m________ test_syncthing_not_syncing[1-x11-syncthing_manager1-49-False] _________[0m

syncthing_manager = <test.helpers.TestManager object at 0x7fffe6fccda0>
expected = 49

    @pytest.mark.parametrize("is_syncing", [False], indirect=True)
    @pytest.mark.parametrize(
        "syncthing_manager,expected",
        [({}, 0), ({"hide_on_idle": False}, DEFAULT_ICON_SIZE + 2 * PADDING)],
        indirect=["syncthing_manager"],
    )
    def test_syncthing_not_syncing(syncthing_manager, expected):
>       info = syncthing_manager.c.widget["syncthing"].info()

[1m[31mtest/widget/test_syncthing.py[0m:129: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6fcec30>
name = 'syncthing'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: syncthing, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:27,412 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m Syncthing widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/syncthing.py", line 100, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/syncthing.py", line 112, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m_________ test_syncthing_is_syncing[1-x11-syncthing_manager0-49-True] __________[0m

syncthing_manager = <test.helpers.TestManager object at 0x7fffe6575310>
expected = 49

    @pytest.mark.parametrize("is_syncing", [True], indirect=True)
    @pytest.mark.parametrize(
        "syncthing_manager,expected",
        [
            ({}, DEFAULT_ICON_SIZE + 2 * PADDING),
            ({"hide_on_idle": False}, DEFAULT_ICON_SIZE + 2 * PADDING),
            ({"icon_size": 10}, 10 + 2 * PADDING),
            ({"show_bar": True}, DEFAULT_ICON_SIZE + DEFAULT_PROGRESS_BAR_SIZE + 3 * PADDING),
            ({"show_bar": True, "bar_width": 50}, DEFAULT_ICON_SIZE + 50 + 3 * PADDING),
            ({"show_bar": True, "show_icon": False}, DEFAULT_PROGRESS_BAR_SIZE + (2 * PADDING)),
        ],
        indirect=["syncthing_manager"],
    )
    def test_syncthing_is_syncing(syncthing_manager, expected):
>       info = syncthing_manager.c.widget["syncthing"].info()

[1m[31mtest/widget/test_syncthing.py[0m:147: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe65764e0>
name = 'syncthing'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: syncthing, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:27,719 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m Syncthing widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/syncthing.py", line 100, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/syncthing.py", line 112, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m_________ test_syncthing_is_syncing[1-x11-syncthing_manager1-49-True] __________[0m

syncthing_manager = <test.helpers.TestManager object at 0x7fffe6fdea50>
expected = 49

    @pytest.mark.parametrize("is_syncing", [True], indirect=True)
    @pytest.mark.parametrize(
        "syncthing_manager,expected",
        [
            ({}, DEFAULT_ICON_SIZE + 2 * PADDING),
            ({"hide_on_idle": False}, DEFAULT_ICON_SIZE + 2 * PADDING),
            ({"icon_size": 10}, 10 + 2 * PADDING),
            ({"show_bar": True}, DEFAULT_ICON_SIZE + DEFAULT_PROGRESS_BAR_SIZE + 3 * PADDING),
            ({"show_bar": True, "bar_width": 50}, DEFAULT_ICON_SIZE + 50 + 3 * PADDING),
            ({"show_bar": True, "show_icon": False}, DEFAULT_PROGRESS_BAR_SIZE + (2 * PADDING)),
        ],
        indirect=["syncthing_manager"],
    )
    def test_syncthing_is_syncing(syncthing_manager, expected):
>       info = syncthing_manager.c.widget["syncthing"].info()

[1m[31mtest/widget/test_syncthing.py[0m:147: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6575070>
name = 'syncthing'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: syncthing, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:27,991 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m Syncthing widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/syncthing.py", line 100, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/syncthing.py", line 112, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m_________ test_syncthing_is_syncing[1-x11-syncthing_manager2-16-True] __________[0m

syncthing_manager = <test.helpers.TestManager object at 0x7fffe6fcddc0>
expected = 16

    @pytest.mark.parametrize("is_syncing", [True], indirect=True)
    @pytest.mark.parametrize(
        "syncthing_manager,expected",
        [
            ({}, DEFAULT_ICON_SIZE + 2 * PADDING),
            ({"hide_on_idle": False}, DEFAULT_ICON_SIZE + 2 * PADDING),
            ({"icon_size": 10}, 10 + 2 * PADDING),
            ({"show_bar": True}, DEFAULT_ICON_SIZE + DEFAULT_PROGRESS_BAR_SIZE + 3 * PADDING),
            ({"show_bar": True, "bar_width": 50}, DEFAULT_ICON_SIZE + 50 + 3 * PADDING),
            ({"show_bar": True, "show_icon": False}, DEFAULT_PROGRESS_BAR_SIZE + (2 * PADDING)),
        ],
        indirect=["syncthing_manager"],
    )
    def test_syncthing_is_syncing(syncthing_manager, expected):
>       info = syncthing_manager.c.widget["syncthing"].info()

[1m[31mtest/widget/test_syncthing.py[0m:147: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6fcc0b0>
name = 'syncthing'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: syncthing, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:28,265 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m Syncthing widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/syncthing.py", line 100, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/syncthing.py", line 112, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m_________ test_syncthing_is_syncing[1-x11-syncthing_manager3-127-True] _________[0m

syncthing_manager = <test.helpers.TestManager object at 0x7fffe6fce450>
expected = 127

    @pytest.mark.parametrize("is_syncing", [True], indirect=True)
    @pytest.mark.parametrize(
        "syncthing_manager,expected",
        [
            ({}, DEFAULT_ICON_SIZE + 2 * PADDING),
            ({"hide_on_idle": False}, DEFAULT_ICON_SIZE + 2 * PADDING),
            ({"icon_size": 10}, 10 + 2 * PADDING),
            ({"show_bar": True}, DEFAULT_ICON_SIZE + DEFAULT_PROGRESS_BAR_SIZE + 3 * PADDING),
            ({"show_bar": True, "bar_width": 50}, DEFAULT_ICON_SIZE + 50 + 3 * PADDING),
            ({"show_bar": True, "show_icon": False}, DEFAULT_PROGRESS_BAR_SIZE + (2 * PADDING)),
        ],
        indirect=["syncthing_manager"],
    )
    def test_syncthing_is_syncing(syncthing_manager, expected):
>       info = syncthing_manager.c.widget["syncthing"].info()

[1m[31mtest/widget/test_syncthing.py[0m:147: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6fcfb60>
name = 'syncthing'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: syncthing, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:28,561 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m Syncthing widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/syncthing.py", line 100, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/syncthing.py", line 112, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m_________ test_syncthing_is_syncing[1-x11-syncthing_manager4-102-True] _________[0m

syncthing_manager = <test.helpers.TestManager object at 0x7fffe6f34b00>
expected = 102

    @pytest.mark.parametrize("is_syncing", [True], indirect=True)
    @pytest.mark.parametrize(
        "syncthing_manager,expected",
        [
            ({}, DEFAULT_ICON_SIZE + 2 * PADDING),
            ({"hide_on_idle": False}, DEFAULT_ICON_SIZE + 2 * PADDING),
            ({"icon_size": 10}, 10 + 2 * PADDING),
            ({"show_bar": True}, DEFAULT_ICON_SIZE + DEFAULT_PROGRESS_BAR_SIZE + 3 * PADDING),
            ({"show_bar": True, "bar_width": 50}, DEFAULT_ICON_SIZE + 50 + 3 * PADDING),
            ({"show_bar": True, "show_icon": False}, DEFAULT_PROGRESS_BAR_SIZE + (2 * PADDING)),
        ],
        indirect=["syncthing_manager"],
    )
    def test_syncthing_is_syncing(syncthing_manager, expected):
>       info = syncthing_manager.c.widget["syncthing"].info()

[1m[31mtest/widget/test_syncthing.py[0m:147: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6f34a10>
name = 'syncthing'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: syncthing, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:28,840 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m Syncthing widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/syncthing.py", line 100, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/syncthing.py", line 112, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m_________ test_syncthing_is_syncing[1-x11-syncthing_manager5-81-True] __________[0m

syncthing_manager = <test.helpers.TestManager object at 0x7fffe6576750>
expected = 81

    @pytest.mark.parametrize("is_syncing", [True], indirect=True)
    @pytest.mark.parametrize(
        "syncthing_manager,expected",
        [
            ({}, DEFAULT_ICON_SIZE + 2 * PADDING),
            ({"hide_on_idle": False}, DEFAULT_ICON_SIZE + 2 * PADDING),
            ({"icon_size": 10}, 10 + 2 * PADDING),
            ({"show_bar": True}, DEFAULT_ICON_SIZE + DEFAULT_PROGRESS_BAR_SIZE + 3 * PADDING),
            ({"show_bar": True, "bar_width": 50}, DEFAULT_ICON_SIZE + 50 + 3 * PADDING),
            ({"show_bar": True, "show_icon": False}, DEFAULT_PROGRESS_BAR_SIZE + (2 * PADDING)),
        ],
        indirect=["syncthing_manager"],
    )
    def test_syncthing_is_syncing(syncthing_manager, expected):
>       info = syncthing_manager.c.widget["syncthing"].info()

[1m[31mtest/widget/test_syncthing.py[0m:147: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6575490>
name = 'syncthing'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: syncthing, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:29,143 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m Syncthing widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/syncthing.py", line 100, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/syncthing.py", line 112, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m____________________ test_syncthing_http_error[1-x11-error] ____________________[0m

syncthing_manager = <test.helpers.TestManager object at 0x7fffe652e6c0>
logger = <_pytest.logging.LogCaptureFixture object at 0x7fffe652fce0>

    @pytest.mark.parametrize("is_syncing", [ERROR], indirect=True)
    def test_syncthing_http_error(syncthing_manager, logger):
        recs = logger.get_records("setup")
        assert recs
>       assert recs[0].levelname == "WARNING"
[1m[31mE       AssertionError: assert 'ERROR' == 'WARNING'[0m
[1m[31mE         [0m
[1m[31mE         - WARNING[0m
[1m[31mE         + ERROR[0m

[1m[31mtest/widget/test_syncthing.py[0m:168: AssertionError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:29,707 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m Syncthing widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/syncthing.py", line 100, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/syncthing.py", line 112, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
------------------------------ Captured log setup ------------------------------
[31m[1mERROR   [0m libqtile:bar.py:391 Syncthing widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/syncthing.py", line 100, in _configure
    self._load_icon()
  File "/build/source/qtile_extras/widget/syncthing.py", line 112, in _load_icon
    self.img.resize(size)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'
[31m[1m______________ test_tvh_widget_not_recording[1-x11-tvh_manager0] _______________[0m

tvh_manager = <test.helpers.TestManager object at 0x7fffe65776e0>

    @pytest.mark.parametrize("tvh_manager", [(2021, 11, 26, 18, 45)], indirect=True)
    def test_tvh_widget_not_recording(tvh_manager):
        """No live recordings."""
>       info = tvh_manager.c.widget["tvhwidget"].info()

[1m[31mtest/widget/test_tvhwidget.py[0m:121: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe65763c0>
name = 'tvhwidget'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: tvhwidget, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:41,414 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m TVHWidget widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/tvheadend.py", line 182, in _configure
    self.setup_images()
  File "/build/source/qtile_extras/widget/tvheadend.py", line 217, in setup_images
    img.resize(height=new_height)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m________________ test_tvh_widget_recording[1-x11-tvh_manager0] _________________[0m

tvh_manager = <test.helpers.TestManager object at 0x7fffe652cda0>

    @pytest.mark.parametrize("tvh_manager", [(2021, 11, 26, 19, 5)], indirect=True)
    def test_tvh_widget_recording(tvh_manager):
        """Live recording."""
>       info = tvh_manager.c.widget["tvhwidget"].info()

[1m[31mtest/widget/test_tvhwidget.py[0m:129: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe652fb30>
name = 'tvhwidget'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: tvhwidget, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:41,699 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m TVHWidget widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/tvheadend.py", line 182, in _configure
    self.setup_images()
  File "/build/source/qtile_extras/widget/tvheadend.py", line 217, in setup_images
    img.resize(height=new_height)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m__________________ test_tvh_widget_popup[1-x11-tvh_manager0] ___________________[0m

tvh_manager = <test.helpers.TestManager object at 0x7fffe6fdddc0>

    @pytest.mark.parametrize("tvh_manager", [(2021, 11, 26, 19, 5)], indirect=True)
    def test_tvh_widget_popup(tvh_manager):
        """Test the popup displays the correct information."""
        tvh_manager.c.bar["top"].fake_button_press(0, "top", 0, 0, 1)
>       _, text = tvh_manager.c.widget["tvhwidget"].eval("self.popup.text")

[1m[31mtest/widget/test_tvhwidget.py[0m:144: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <libqtile.command.client.InteractiveCommandClient object at 0x7fffe6fde7b0>
name = 'tvhwidget'

    def __getitem__(self, name: str | int) -> InteractiveCommandClient:
        """Get the selected element of the currently selected object
    
        From the current command graph object, select the instance with the
        given name.
    
        Parameters
        ----------
        name: str
            The name, or index if it's of int type, of the item to resolve
    
        Return
        ------
        InteractiveCommandClient
            The current client, navigated to the specified command graph
            object.
        """
        if isinstance(self._current_node, CommandGraphRoot):
            raise KeyError("Root node has no available items", name, self._current_node.selectors)
    
        if not isinstance(self._current_node, CommandGraphObject):
            raise SelectError(
                "Unable to make selection on current node",
                str(name),
                self._current_node.selectors,
            )
    
        if self._current_node.selector is not None:
            raise SelectError("Selection already made", str(name), self._current_node.selectors)
    
        # check the selection is valid in the server-side qtile manager
        if not self._command.has_item(
            self._current_node.parent, self._current_node.object_type, name
        ):
>           raise SelectError(
                "Item not available in object", str(name), self._current_node.selectors
            )
[1m[31mE           libqtile.command.base.SelectError: Item not available in object, name: tvhwidget, selectors: [('widget', None)][0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/command/client.py[0m:279: SelectError
---------------------------- Captured stdout setup -----------------------------
[0m[31m2024-10-19 20:58:41,988 [1m[31mlibqtile bar.py:_configure_widget():L391 [0m TVHWidget widget crashed during _configure with error:
Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 200, in default_size
    return self._default_size
           ^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_size'. Did you mean: 'default_size'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 191, in default_surface
    return self._default_surface
           ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Img' object has no attribute '_default_surface'. Did you mean: 'default_surface'?

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/bar.py", line 382, in _configure_widget
    widget._configure(self.qtile, self)
  File "/build/source/qtile_extras/widget/decorations.py", line 869, in new_configure
    self.old_configure(qtile, bar)
  File "/build/source/qtile_extras/widget/tvheadend.py", line 182, in _configure
    self.setup_images()
  File "/build/source/qtile_extras/widget/tvheadend.py", line 217, in setup_images
    img.resize(height=new_height)
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 212, in resize
    width0, height0 = self.default_size
                      ^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 202, in default_size
    surf = self.default_surface
           ^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 193, in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py", line 56, in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 785, in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 158, in __init__
    self._check_status()
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py", line 170, in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
  File "/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py", line 96, in _check_status
    raise exception(message, status)
cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m
---------------------------- Captured stderr setup -----------------------------
Fontconfig error: Cannot load default config file: No such file: (null)
[31m[1m____________________________ test_snapcast_options _____________________________[0m

self = <[CairoError("cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'") raised in repr()] ImgMask object at 0x7fffe65ca540>

    @property
    def default_size(self):
        try:
>           return self._default_size
[1m[31mE           AttributeError: 'ImgMask' object has no attribute '_default_size'. Did you mean: 'default_size'?[0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py[0m:200: AttributeError

[33mDuring handling of the above exception, another exception occurred:[0m

self = <[CairoError("cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'") raised in repr()] ImgMask object at 0x7fffe65ca540>

    @property
    def default_surface(self):
        try:
>           return self._default_surface
[1m[31mE           AttributeError: 'ImgMask' object has no attribute '_default_surface'. Did you mean: 'default_surface'?[0m

[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py[0m:191: AttributeError

[33mDuring handling of the above exception, another exception occurred:[0m

fake_qtile = <test.widget.conftest.fake_qtile.<locals>.FakeQtile object at 0x7fffe65ca210>
fake_bar = <libqtile.bar.Bar object at 0x7fffe65ca330>

    def test_snapcast_options(fake_qtile, fake_bar):
        snap = qtile_extras.widget.snapcast.SnapCast(options="-s pipewire")
>       snap._configure(fake_qtile, fake_bar)

[1m[31mtest/widget/test_snapcast.py[0m:273: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
[1m[31mqtile_extras/widget/decorations.py[0m:869: in new_configure
    self.old_configure(qtile, bar)
[1m[31mqtile_extras/widget/snapcast.py[0m:93: in _configure
    self._load_icon()
[1m[31mqtile_extras/widget/snapcast.py[0m:106: in _load_icon
    self.img.resize(size)
[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py[0m:212: in resize
    width0, height0 = self.default_size
[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py[0m:202: in default_size
    surf = self.default_surface
[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py[0m:193: in default_surface
    surf, fmt = get_cairo_surface(self.bytes_img)
[1m[31m/nix/store/92yw2vl50y9gpfxvqlypx0ci0zjz3lwk-python3.12-qtile-0.28.1/lib/python3.12/site-packages/libqtile/images.py[0m:56: in get_cairo_surface
    surf = cairocffi.ImageSurface.create_from_png(io.BytesIO(bytes_img))
[1m[31m/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py[0m:785: in create_from_png
    Surface.__init__(self, pointer)  # Skip ImageSurface.__init__
[1m[31m/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py[0m:158: in __init__
    self._check_status()
[1m[31m/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/surfaces.py[0m:170: in _check_status
    _check_status(cairo.cairo_surface_status(self._pointer))
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

status = 39

    def _check_status(status):
        """Take a cairo status code and raise an exception if/as appropriate."""
        if status != constants.STATUS_SUCCESS:
            exception = STATUS_TO_EXCEPTION.get(status, CairoError)
            status_name = ffi.string(ffi.cast("cairo_status_t", status))
            message = 'cairo returned %s: %s' % (
                status_name, ffi.string(cairo.cairo_status_to_string(status)))
>           raise exception(message, status)
[1m[31mE           cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurred in libpng while reading from or writing to a PNG file'[0m

[1m[31m/nix/store/fn11byrl8zjf7kmm08kahy3xiqlx756a-python3.12-cairocffi-1.7.1/lib/python3.12/site-packages/cairocffi/__init__.py[0m:96: CairoError
[33m=============================== warnings summary ===============================[0m
test/widget/test_alsawidget.py:239
  /build/source/test/widget/test_alsawidget.py:239: PytestUnknownMarkWarning: Unknown pytest.mark.flaky - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.flaky(reruns=5)

test/widget/test_githubnotifications.py:149
  /build/source/test/widget/test_githubnotifications.py:149: PytestUnknownMarkWarning: Unknown pytest.mark.flaky - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.flaky(reruns=5)

test/widget/test_githubnotifications.py:184
  /build/source/test/widget/test_githubnotifications.py:184: PytestUnknownMarkWarning: Unknown pytest.mark.flaky - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.flaky(reruns=5)

test/widget/test_image.py:124
  /build/source/test/widget/test_image.py:124: PytestUnknownMarkWarning: Unknown pytest.mark.flaky - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.flaky(reruns=5)

test/widget/test_image.py:134
  /build/source/test/widget/test_image.py:134: PytestUnknownMarkWarning: Unknown pytest.mark.flaky - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.flaky(reruns=5)

test/widget/test_mpris2.py:59
  /build/source/test/widget/test_mpris2.py:59: PytestCollectionWarning: cannot collect test class 'TestPlayer' because it has a __init__ constructor (from: test/widget/test_mpris2.py)
    class TestPlayer(ServiceInterface):

test/widget/test_mpris2.py:65
  /build/source/test/widget/test_mpris2.py:65: PytestCollectionWarning: cannot collect test class 'TestPlayerControls' because it has a __init__ constructor (from: test/widget/test_mpris2.py)
    class TestPlayerControls(ServiceInterface):

test/widget/test_snapcast.py:262
  /build/source/test/widget/test_snapcast.py:262: PytestUnknownMarkWarning: Unknown pytest.mark.flaky - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.flaky(reruns=5)

test/widget/test_analogueclock.py: 2 warnings
test/widget/test_animated_image.py: 5 warnings
test/widget/test_currentlayouticon.py: 1 warning
test/widget/test_githubnotifications.py: 6 warnings
test/widget/test_groupbox2.py: 8 warnings
test/widget/test_image.py: 2 warnings
test/widget/test_init_configure.py: 11 warnings
test/widget/test_syncthing.py: 5 warnings
test/widget/test_tooltip.py: 3 warnings
  /nix/store/wfbjq35kxs6x83c3ncpfxdyl5gbhdx4h-python3-3.12.6/lib/python3.12/multiprocessing/popen_fork.py:66: DeprecationWarning: This process (pid=486) is multi-threaded, use of fork() may lead to deadlocks in the child.
    self.pid = os.fork()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
[36m[1m=========================== short test summary info ============================[0m
[31mFAILED[0m test/test_images.py::[1mtest_draw[1-x11][0m - libqtile.command.base.SelectError: Item not available in object, name: mask...
[31mFAILED[0m test/widget/test_githubnotifications.py::[1mtest_githubnotifications_colours[1-x11-False-808080][0m - libqtile.command.base.SelectError: Item not available in object, name: gith...
[31mFAILED[0m test/widget/test_githubnotifications.py::[1mtest_githubnotifications_colours[1-x11-True-ffffff][0m - libqtile.command.base.SelectError: Item not available in object, name: gith...
[31mFAILED[0m test/widget/test_githubnotifications.py::[1mtest_githubnotifications_colours[1-x11-error-ffff00][0m - libqtile.command.base.SelectError: Item not available in object, name: gith...
[31mFAILED[0m test/widget/test_githubnotifications.py::[1mtest_githubnotifications_logging[1-x11-False-githubnotification_manager0-expected0][0m - libqtile.command.base.SelectError: Item not available in object, name: gith...
[31mFAILED[0m test/widget/test_githubnotifications.py::[1mtest_githubnotifications_logging[1-x11-error-githubnotification_manager1-expected1][0m - libqtile.command.base.SelectError: Item not available in object, name: gith...
[31mFAILED[0m test/widget/test_githubnotifications.py::[1mtest_githubnotifications_icon[1-x11-False-githubnotification_manager0-49][0m - libqtile.command.base.SelectError: Item not available in object, name: gith...
[31mFAILED[0m test/widget/test_githubnotifications.py::[1mtest_githubnotifications_icon[1-x11-False-githubnotification_manager1-16][0m - libqtile.command.base.SelectError: Item not available in object, name: gith...
[31mFAILED[0m test/widget/test_groupbox2.py::[1mtest_image[1-x11-gbmanager0][0m - libqtile.command.base.SelectError: Item not available in object, name: grou...
[31mFAILED[0m test/widget/test_image.py::[1mtest_image_size_mask[1-x11-image_manager0][0m - assert not [<LogRecord: libqtile, 40, /nix/store/92yw2vl50y9gpfxvqlypx0ci0z...
[31mFAILED[0m test/widget/test_init_configure.py::[1mtest_widget_init_config[1-x11-GithubNotifications-kwargs8][0m - AssertionError: assert 'configerrorwidget' in ['githubnotifications', '<no ...
[31mFAILED[0m test/widget/test_init_configure.py::[1mtest_widget_init_config[1-x11-SnapCast-kwargs22][0m - AssertionError: assert 'configerrorwidget' in ['snapcast', '<no name>']
[31mFAILED[0m test/widget/test_init_configure.py::[1mtest_widget_init_config[1-x11-Syncthing-kwargs26][0m - AssertionError: assert 'configerrorwidget' in ['syncthing', '<no name>']
[31mFAILED[0m test/widget/test_init_configure.py::[1mtest_widget_init_config[1-x11-TVHWidget-kwargs28][0m - AssertionError: assert 'configerrorwidget' in ['tvhwidget', '<no name>']
[31mFAILED[0m test/widget/test_snapcast.py::[1mtest_snapcast_icon[1-x11-snapcast_manager0-49][0m - libqtile.command.base.SelectError: Item not available in object, name: snap...
[31mFAILED[0m test/widget/test_snapcast.py::[1mtest_snapcast_icon[1-x11-snapcast_manager1-26][0m - libqtile.command.base.SelectError: Item not available in object, name: snap...
[31mFAILED[0m test/widget/test_snapcast.py::[1mtest_snapcast_icon_colour[1-x11-snapcast_manager0-ffffff][0m - libqtile.command.base.SelectError: Item not available in object, name: snap...
[31mFAILED[0m test/widget/test_snapcast.py::[1mtest_snapcast_icon_colour[1-x11-snapcast_manager1-ffff00][0m - libqtile.command.base.SelectError: Item not available in object, name: snap...
[31mFAILED[0m test/widget/test_snapcast.py::[1mtest_snapcast_http_error[1-x11-error][0m - libqtile.command.base.SelectError: Item not available in object, name: snap...
[31mFAILED[0m test/widget/test_syncthing.py::[1mtest_syncthing_not_syncing[1-x11-syncthing_manager0-0-False][0m - libqtile.command.base.SelectError: Item not available in object, name: sync...
[31mFAILED[0m test/widget/test_syncthing.py::[1mtest_syncthing_not_syncing[1-x11-syncthing_manager1-49-False][0m - libqtile.command.base.SelectError: Item not available in object, name: sync...
[31mFAILED[0m test/widget/test_syncthing.py::[1mtest_syncthing_is_syncing[1-x11-syncthing_manager0-49-True][0m - libqtile.command.base.SelectError: Item not available in object, name: sync...
[31mFAILED[0m test/widget/test_syncthing.py::[1mtest_syncthing_is_syncing[1-x11-syncthing_manager1-49-True][0m - libqtile.command.base.SelectError: Item not available in object, name: sync...
[31mFAILED[0m test/widget/test_syncthing.py::[1mtest_syncthing_is_syncing[1-x11-syncthing_manager2-16-True][0m - libqtile.command.base.SelectError: Item not available in object, name: sync...
[31mFAILED[0m test/widget/test_syncthing.py::[1mtest_syncthing_is_syncing[1-x11-syncthing_manager3-127-True][0m - libqtile.command.base.SelectError: Item not available in object, name: sync...
[31mFAILED[0m test/widget/test_syncthing.py::[1mtest_syncthing_is_syncing[1-x11-syncthing_manager4-102-True][0m - libqtile.command.base.SelectError: Item not available in object, name: sync...
[31mFAILED[0m test/widget/test_syncthing.py::[1mtest_syncthing_is_syncing[1-x11-syncthing_manager5-81-True][0m - libqtile.command.base.SelectError: Item not available in object, name: sync...
[31mFAILED[0m test/widget/test_syncthing.py::[1mtest_syncthing_http_error[1-x11-error][0m - AssertionError: assert 'ERROR' == 'WARNING'
[31mFAILED[0m test/widget/test_tvhwidget.py::[1mtest_tvh_widget_not_recording[1-x11-tvh_manager0][0m - libqtile.command.base.SelectError: Item not available in object, name: tvhw...
[31mFAILED[0m test/widget/test_tvhwidget.py::[1mtest_tvh_widget_recording[1-x11-tvh_manager0][0m - libqtile.command.base.SelectError: Item not available in object, name: tvhw...
[31mFAILED[0m test/widget/test_tvhwidget.py::[1mtest_tvh_widget_popup[1-x11-tvh_manager0][0m - libqtile.command.base.SelectError: Item not available in object, name: tvhw...
[31mFAILED[0m test/widget/test_snapcast.py::[1mtest_snapcast_options[0m - cairocffi.CairoError: cairo returned CAIRO_STATUS_PNG_ERROR: b'error occurr...
[31mERROR[0m test/widget/test_animated_image.py::[1mtest_default[1-x11][0m - libqtile.command.base.SelectError: Item not available in object, name: anim...
[31mERROR[0m test/widget/test_animated_image.py::[1mtest_multiple_loops[1-x11-widget0][0m - libqtile.command.base.SelectError: Item not available in object, name: anim...
[31mERROR[0m test/widget/test_animated_image.py::[1mtest_stop[1-x11-widget0][0m - libqtile.command.base.SelectError: Item not available in object, name: anim...
[31mERROR[0m test/widget/test_animated_image.py::[1mtest_width_default[1-x11][0m - libqtile.command.base.SelectError: Item not available in object, name: anim...
[31mERROR[0m test/widget/test_animated_image.py::[1mtest_width_no_padding[1-x11-widget0][0m - libqtile.command.base.SelectError: Item not available in object, name: anim...
[31m= [31m[1m32 failed[0m, [32m275 passed[0m, [33m1 skipped[0m, [33m62 deselected[0m, [33m2 xfailed[0m, [33m51 warnings[0m, [31m[1m5 errors[0m[31m in 120.20s (0:02:00)[0m[31m =[0m
